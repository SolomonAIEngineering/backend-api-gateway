<!DOCTYPE html>
<html  lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Service Overview · Docus</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:image" content="https://user-images.githubusercontent.com/904724/185365452-87b7ca7b-6030-4813-a2db-5e65c785bf88.png">
<meta property="og:title" content="Service Overview">
<meta name="description" content="Simifinii: Authentication Microservice Design Document">
<meta property="og:description" content="Simifinii: Authentication Microservice Design Document">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/engineering/service-overview/_payload.json">
<link rel="stylesheet" href="/_nuxt/entry.2685c6ae.css">
<link rel="stylesheet" href="/_nuxt/DocumentDrivenNotFound.7238633c.css">
<link rel="stylesheet" href="/_nuxt/ButtonLink.c4905621.css">
<link rel="stylesheet" href="/_nuxt/DocsPageLayout.2ba2acb9.css">
<link rel="stylesheet" href="/_nuxt/DocsAside.7397caed.css">
<link rel="stylesheet" href="/_nuxt/ProseCodeInline.21ce328c.css">
<link rel="stylesheet" href="/_nuxt/Alert.408d0512.css">
<link rel="stylesheet" href="/_nuxt/DocsPageBottom.9f7ccbf0.css">
<link rel="stylesheet" href="/_nuxt/ProseA.e2976377.css">
<link rel="stylesheet" href="/_nuxt/DocsPrevNext.0d80e373.css">
<link rel="stylesheet" href="/_nuxt/DocsToc.855ff635.css">
<link rel="stylesheet" href="/_nuxt/DocsTocLinks.310b9647.css">
<link rel="stylesheet" href="/_nuxt/ProseP.945916cd.css">
<link rel="stylesheet" href="/_nuxt/ProseStrong.263d77e1.css">
<link rel="stylesheet" href="/_nuxt/ProseH2.df45a763.css">
<link rel="stylesheet" href="/_nuxt/ProseH3.88c2d983.css">
<link rel="stylesheet" href="/_nuxt/ProseImg.018721e2.css">
<link rel="stylesheet" href="/_nuxt/ProseUl.c9c63ec7.css">
<link rel="stylesheet" href="/_nuxt/ProseLi.ac05b421.css">
<link rel="stylesheet" href="/_nuxt/ProseH4.5b64d6f8.css">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.0aaaba2d.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/document-driven.907905df.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DocumentDrivenEmpty.6e60ddc6.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.a1875337.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.vue.89f14b2f.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DocumentDrivenNotFound.51ac4207.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ButtonLink.d000e08d.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/slot.f9135344.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/node.676c5e99.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/IconDocus.6a4e0b30.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.a07f5b79.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DocsPageLayout.3c7a6c92.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DocsAside.61b157ec.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCodeInline.d3d8bd7d.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Alert.ab8d30fe.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DocsPageBottom.94c4583d.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.49bdbed4.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/EditOnLink.vue.801636f8.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DocsPrevNext.dce02612.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DocsToc.515ea557.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DocsTocLinks.b8580970.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.4e98ce7a.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/EditOnLink.66e734f1.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.5aca17eb.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseStrong.31c3f328.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.6c1bfe46.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.b098ea10.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseImg.77e47a17.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseUl.19c7d791.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.b94e5081.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH4.6250b431.js">
<link rel="prefetch" as="style" href="/_nuxt/page.41b64923.css">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/page.e0d6e849.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/client-db.ad09b40e.js">
<link rel="prefetch" as="style" href="/_nuxt/useStudio.37ff8fdd.css">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/useStudio.a9ed9fdf.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/debug.4c1ef312.js">
<link rel="prefetch" as="style" href="/_nuxt/error-404.e7689c2d.css">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/error-404.1bd8ddfb.js">
<link rel="prefetch" as="style" href="/_nuxt/error-500.92b46a75.css">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/error-500.cc0d159b.js">
<script type="module" src="/_nuxt/entry.0aaaba2d.js" crossorigin></script><style id="pinceau-runtime-hydratable">@media{.phy[--]{--puid:NpSeat-v;}.pv-vEwQwj{padding-left:var(--elements-container-padding-mobile);padding-right:var(--elements-container-padding-mobile);}@media (min-width: 475px){.pv-vEwQwj{padding-left:var(--elements-container-padding-xs);padding-right:var(--elements-container-padding-xs);}}@media (min-width: 640px){.pv-vEwQwj{padding-left:var(--elements-container-padding-sm);padding-right:var(--elements-container-padding-sm);}}@media (min-width: 768px){.pv-vEwQwj{padding-left:var(--elements-container-padding-md);padding-right:var(--elements-container-padding-md);}}} @media{.phy[--]{--puid:EmeDcd-v;}.pv-mgkXWJ{max-width:var(--elements-container-maxWidth);padding-left:var(--elements-container-padding-mobile);padding-right:var(--elements-container-padding-mobile);}@media (min-width: 475px){.pv-mgkXWJ{padding-left:var(--elements-container-padding-xs);padding-right:var(--elements-container-padding-xs);}}@media (min-width: 640px){.pv-mgkXWJ{padding-left:var(--elements-container-padding-sm);padding-right:var(--elements-container-padding-sm);}}@media (min-width: 768px){.pv-mgkXWJ{padding-left:var(--elements-container-padding-md);padding-right:var(--elements-container-padding-md);}}} </style><style id="pinceau-theme">@media { :root {--pinceau-mq: initial; --docus-search-results-highlight-color: white;--docus-search-results-window-maxHeight: 100%;--docus-search-results-window-maxWidth: 640px;--docus-search-results-window-marginTop: 0;--docus-search-input-borderStyle: solid;--docus-search-input-borderWidth: 1px;--docus-search-backdropFilter: blur(24px);--docus-loadingBar-gradientColorStop3: #0047e1;--docus-loadingBar-gradientColorStop2: #34cdfe;--docus-loadingBar-gradientColorStop1: #00dc82;--docus-loadingBar-height: 3px;--docus-readableLine: 78ch;--docus-footer-height: 145px;--docus-header-height: 64px;--prose-code-inline-padding: 0.2rem 0.375rem 0.2rem 0.375rem;--prose-code-block-backdropFilter: contrast(1);--prose-code-block-border-style: solid;--prose-code-block-border-width: 1px;--prose-tbody-tr-borderBottom-style: dashed;--prose-tbody-tr-borderBottom-width: 1px;--prose-th-textAlign: inherit;--prose-thead-borderBottom-style: solid;--prose-thead-borderBottom-width: 1px;--prose-thead-border-style: solid;--prose-thead-border-width: 0px;--prose-table-textAlign: start;--prose-hr-width: 1px;--prose-hr-style: solid;--prose-li-listStylePosition: outside;--prose-ol-li-markerColor: currentColor;--prose-ol-paddingInlineStart: 21px;--prose-ol-listStyleType: decimal;--prose-ul-li-markerColor: currentColor;--prose-ul-paddingInlineStart: 21px;--prose-ul-listStyleType: disc;--prose-blockquote-border-style: solid;--prose-blockquote-border-width: 4px;--prose-blockquote-quotes: '201C' '201D' '2018' '2019';--prose-blockquote-paddingInlineStart: 24px;--prose-a-code-color-hover: currentColor;--prose-a-code-color-static: currentColor;--prose-a-hasCode-borderBottom: none;--prose-a-border-distance: 2px;--prose-a-border-color-hover: currentColor;--prose-a-border-color-static: currentColor;--prose-a-border-style-hover: solid;--prose-a-border-style-static: dashed;--prose-a-border-width: 1px;--prose-a-color-static: inherit;--prose-a-textDecoration: none;--prose-h6-margin: 3rem 0 2rem;--prose-h5-margin: 3rem 0 2rem;--prose-h4-margin: 3rem 0 2rem;--prose-h3-margin: 3rem 0 2rem;--prose-h2-margin: 3rem 0 2rem;--prose-h1-margin: 0 0 2rem;--typography-lead-loose: 2;--typography-lead-relaxed: 1.625;--typography-lead-normal: 1.5;--typography-lead-snug: 1.375;--typography-lead-tight: 1.25;--typography-lead-none: 1;--typography-lead-10: 2.5rem;--typography-lead-9: 2.25rem;--typography-lead-8: 2rem;--typography-lead-7: 1.75rem;--typography-lead-6: 1.5rem;--typography-lead-5: 1.25rem;--typography-lead-4: 1rem;--typography-lead-3: .75rem;--typography-lead-2: .5rem;--typography-lead-1: .025rem;--typography-fontWeight-black: 900;--typography-fontWeight-extrabold: 800;--typography-fontWeight-bold: 700;--typography-fontWeight-semibold: 600;--typography-fontWeight-medium: 500;--typography-fontWeight-normal: 400;--typography-fontWeight-light: 300;--typography-fontWeight-extralight: 200;--typography-fontWeight-thin: 100;--typography-fontSize-9xl: 128px;--typography-fontSize-8xl: 96px;--typography-fontSize-7xl: 72px;--typography-fontSize-6xl: 60px;--typography-fontSize-5xl: 48px;--typography-fontSize-4xl: 36px;--typography-fontSize-3xl: 30px;--typography-fontSize-2xl: 24px;--typography-fontSize-xl: 20px;--typography-fontSize-lg: 18px;--typography-fontSize-base: 16px;--typography-fontSize-sm: 14px;--typography-fontSize-xs: 12px;--typography-letterSpacing-wide: 0.025em;--typography-letterSpacing-tight: -0.025em;--typography-verticalMargin-base: 24px;--typography-verticalMargin-sm: 16px;--elements-border-secondary-hover: [object Object];--elements-backdrop-background: #fffc;--elements-backdrop-filter: saturate(200%) blur(20px);--elements-container-maxWidth: 80rem;--lead-loose: 2;--lead-relaxed: 1.625;--lead-normal: 1.5;--lead-snug: 1.375;--lead-tight: 1.25;--lead-none: 1;--lead-10: 2.5rem;--lead-9: 2.25rem;--lead-8: 2rem;--lead-7: 1.75rem;--lead-6: 1.5rem;--lead-5: 1.25rem;--lead-4: 1rem;--lead-3: .75rem;--lead-2: .5rem;--lead-1: .025rem;--letterSpacing-widest: 0.1em;--letterSpacing-wider: 0.05em;--letterSpacing-wide: 0.025em;--letterSpacing-normal: 0em;--letterSpacing-tight: -0.025em;--letterSpacing-tighter: -0.05em;--fontSize-9xl: 8rem;--fontSize-8xl: 6rem;--fontSize-7xl: 4.5rem;--fontSize-6xl: 3.75rem;--fontSize-5xl: 3rem;--fontSize-4xl: 2.25rem;--fontSize-3xl: 1.875rem;--fontSize-2xl: 1.5rem;--fontSize-xl: 1.25rem;--fontSize-lg: 1.125rem;--fontSize-base: 1rem;--fontSize-sm: 0.875rem;--fontSize-xs: 0.75rem;--fontWeight-black: 900;--fontWeight-extrabold: 800;--fontWeight-bold: 700;--fontWeight-semibold: 600;--fontWeight-medium: 500;--fontWeight-normal: 400;--fontWeight-light: 300;--fontWeight-extralight: 200;--fontWeight-thin: 100;--font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;--font-serif: ui-serif, Georgia, Cambria, Times New Roman, Times, serif;--font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;--opacity-total: 1;--opacity-high: 0.8;--opacity-medium: 0.5;--opacity-soft: 0.3;--opacity-light: 0.15;--opacity-bright: 0.1;--opacity-noOpacity: 0;--borderWidth-lg: 3px;--borderWidth-md: 2px;--borderWidth-sm: 1px;--borderWidth-noBorder: 0;--space-rem-875: 0.875rem;--space-rem-625: 0.625rem;--space-rem-375: 0.375rem;--space-rem-125: 0.125rem;--space-px: 1px;--space-128: 32rem;--space-96: 24rem;--space-80: 20rem;--space-72: 18rem;--space-64: 16rem;--space-60: 15rem;--space-56: 14rem;--space-52: 13rem;--space-48: 12rem;--space-44: 11rem;--space-40: 10rem;--space-36: 9rem;--space-32: 8rem;--space-28: 7rem;--space-24: 6rem;--space-20: 5rem;--space-16: 4rem;--space-14: 3.5rem;--space-12: 3rem;--space-11: 2.75rem;--space-10: 2.5rem;--space-9: 2.25rem;--space-8: 2rem;--space-7: 1.75rem;--space-6: 1.5rem;--space-5: 1.25rem;--space-4: 1rem;--space-3: 0.75rem;--space-2: 0.5rem;--space-1: 0.25rem;--space-0: 0px;--size-full: 100%;--size-7xl: 80rem;--size-6xl: 72rem;--size-5xl: 64rem;--size-4xl: 56rem;--size-3xl: 48rem;--size-2xl: 42rem;--size-xl: 36rem;--size-lg: 32rem;--size-md: 28rem;--size-sm: 24rem;--size-xs: 20rem;--size-200: 200px;--size-104: 104px;--size-80: 80px;--size-64: 64px;--size-56: 56px;--size-48: 48px;--size-40: 40px;--size-32: 32px;--size-24: 24px;--size-20: 20px;--size-16: 16px;--size-12: 12px;--size-8: 8px;--size-6: 6px;--size-4: 4px;--size-2: 2px;--size-0: 0px;--radii-full: 9999px;--radii-3xl: 1.75rem;--radii-2xl: 1.5rem;--radii-xl: 1rem;--radii-lg: 0.75rem;--radii-md: 0.5rem;--radii-sm: 0.375rem;--radii-xs: 0.25rem;--radii-2xs: 0.125rem;--radii-none: 0px;--shadow-none: 0px 0px 0px 0px transparent;--height-screen: 100vh;--width-screen: 100vw;--color-primary-900: #001A1F;--color-primary-800: #00232B;--color-primary-700: #024757;--color-primary-600: #09A0C1;--color-primary-500: #1AD6FF;--color-primary-400: #55E1FF;--color-primary-300: #82E3FF;--color-primary-200: #C5F2FF;--color-primary-100: #DCF7FF;--color-primary-50: #F1FCFF;--color-ruby-900: #380011;--color-ruby-800: #700021;--color-ruby-700: #a90032;--color-ruby-600: #e10043;--color-ruby-500: #ff1a5e;--color-ruby-400: #ff4079;--color-ruby-300: #ff6694;--color-ruby-200: #ff8dae;--color-ruby-100: #ffb3c9;--color-ruby-50: #ffd9e4;--color-pink-900: #380025;--color-pink-800: #70004b;--color-pink-700: #a90070;--color-pink-600: #e10095;--color-pink-500: #ff1ab2;--color-pink-400: #ff40bf;--color-pink-300: #ff66cc;--color-pink-200: #ff8dd8;--color-pink-100: #ffb3e5;--color-pink-50: #ffd9f2;--color-purple-900: #190038;--color-purple-800: #330070;--color-purple-700: #4c00a9;--color-purple-600: #6500e1;--color-purple-500: #811aff;--color-purple-400: #9640ff;--color-purple-300: #ab66ff;--color-purple-200: #c08dff;--color-purple-100: #d5b3ff;--color-purple-50: #ead9ff;--color-royalblue-900: #0b0531;--color-royalblue-800: #160a62;--color-royalblue-700: #211093;--color-royalblue-600: #2c15c4;--color-royalblue-500: #4127e8;--color-royalblue-400: #614bec;--color-royalblue-300: #806ff0;--color-royalblue-200: #a093f3;--color-royalblue-100: #c0b7f7;--color-royalblue-50: #dfdbfb;--color-indigoblue-900: #001238;--color-indigoblue-800: #002370;--color-indigoblue-700: #0035a9;--color-indigoblue-600: #0047e1;--color-indigoblue-500: #1a62ff;--color-indigoblue-400: #407cff;--color-indigoblue-300: #6696ff;--color-indigoblue-200: #8db0ff;--color-indigoblue-100: #b3cbff;--color-indigoblue-50: #d9e5ff;--color-blue-900: #00131D;--color-blue-800: #002235;--color-blue-700: #014267;--color-blue-600: #0069A6;--color-blue-500: #1AADFF;--color-blue-400: #64C7FF;--color-blue-300: #A1DDFF;--color-blue-200: #C6EAFF;--color-blue-100: #DFF3FF;--color-blue-50: #F2FAFF;--color-lightblue-900: #002e38;--color-lightblue-800: #005c70;--color-lightblue-700: #008aa9;--color-lightblue-600: #00b9e1;--color-lightblue-500: #1ad6ff;--color-lightblue-400: #40ddff;--color-lightblue-300: #66e4ff;--color-lightblue-200: #8deaff;--color-lightblue-100: #b3f1ff;--color-lightblue-50: #d9f8ff;--color-teal-900: #062a28;--color-teal-800: #0b544f;--color-teal-700: #117d77;--color-teal-600: #16a79e;--color-teal-500: #1cd1c6;--color-teal-400: #36e4da;--color-teal-300: #5fe9e1;--color-teal-200: #87efe9;--color-teal-100: #aff4f0;--color-teal-50: #d7faf8;--color-pear-900: #2a2b09;--color-pear-800: #545512;--color-pear-700: #7e801b;--color-pear-600: #a8aa24;--color-pear-500: #d0d32f;--color-pear-400: #d8da52;--color-pear-300: #e0e274;--color-pear-200: #e8e997;--color-pear-100: #eff0ba;--color-pear-50: #f7f8dc;--color-red-900: #1C0301;--color-red-800: #340A01;--color-red-700: #701704;--color-red-600: #BB2402;--color-red-500: #FF3B10;--color-red-400: #FF7353;--color-red-300: #FFA692;--color-red-200: #FFDED7;--color-red-100: #FFF3F0;--color-red-50: #FFF9F8;--color-orange-900: #381800;--color-orange-800: #702f00;--color-orange-700: #a94700;--color-orange-600: #e15e00;--color-orange-500: #ff7a1a;--color-orange-400: #ff9040;--color-orange-300: #ffa666;--color-orange-200: #ffbd8d;--color-orange-100: #ffd3b3;--color-orange-50: #ffe9d9;--color-yellow-900: #1B1500;--color-yellow-800: #292100;--color-yellow-700: #614E02;--color-yellow-600: #CBA408;--color-yellow-500: #FBCA05;--color-yellow-400: #FFDC4E;--color-yellow-300: #FFE372;--color-yellow-200: #FFF0B1;--color-yellow-100: #FFF6D3;--color-yellow-50: #FFFCEE;--color-green-900: #00190F;--color-green-800: #002817;--color-green-700: #006037;--color-green-600: #00B467;--color-green-500: #0DD885;--color-green-400: #3CEEA5;--color-green-300: #86FBCB;--color-green-200: #C3FFE6;--color-green-100: #DEFFF1;--color-green-50: #ECFFF7;--color-gray-900: #121110;--color-gray-800: #201E1B;--color-gray-700: #36332E;--color-gray-600: #67635D;--color-gray-500: #97948F;--color-gray-400: #ADA9A4;--color-gray-300: #DBD9D3;--color-gray-200: #ECEBE8;--color-gray-100: #F6F5F4;--color-gray-50: #FBFBFB;--color-black: #0B0A0A;--color-white: #ffffff;--media-portrait: only screen and (orientation: portrait);--media-landscape: only screen and (orientation: landscape);--media-rm: (prefers-reduced-motion: reduce);--media-2xl: (min-width: 1536px);--media-xl: (min-width: 1280px);--media-lg: (min-width: 1024px);--media-md: (min-width: 768px);--media-sm: (min-width: 640px);--media-xs: (min-width: 475px);--docus-search-results-highlight-backgroundColor: var(--color-primary-500);--docus-search-results-selected-backgroundColor: var(--color-gray-300);--docus-search-results-window-borderRadius: none;--docus-search-results-window-marginX: 0;--docus-search-input-backgroundColor: var(--color-gray-200);--docus-search-input-padding: var(--space-2) var(--space-4);--docus-search-input-gap: var(--space-2);--docus-search-input-fontSize: var(--fontSize-sm);--docus-search-input-borderColor: var(--color-gray-200);--docus-search-input-borderRadius: var(--radii-2xs);--docus-footer-padding: var(--space-4) 0;--docus-header-title-color-hover: var(--color-primary-500);--docus-header-title-color-static: var(--color-gray-900);--docus-header-title-fontWeight: var(--fontWeight-bold);--docus-header-title-fontSize: var(--fontSize-2xl);--docus-header-logo-height: var(--space-6);--docus-body-fontFamily: var(--font-sans);--docus-body-color: var(--color-gray-800);--docus-body-backgroundColor: var(--color-white);--prose-code-inline-fontWeight: var(--typography-fontWeight-normal);--prose-code-inline-fontSize: var(--typography-fontSize-sm);--prose-code-inline-borderRadius: var(--radii-xs);--prose-code-block-pre-padding: var(--typography-verticalMargin-sm);--prose-code-block-margin: var(--typography-verticalMargin-base) 0;--prose-code-block-fontSize: var(--typography-fontSize-sm);--prose-tbody-code-inline-fontSize: var(--typography-fontSize-sm);--prose-tbody-td-padding: var(--typography-verticalMargin-sm);--prose-th-fontWeight: var(--typography-fontWeight-semibold);--prose-th-padding: 0 var(--typography-verticalMargin-sm) var(--typography-verticalMargin-sm) var(--typography-verticalMargin-sm);--prose-table-lineHeight: var(--typography-lead-6);--prose-table-fontSize: var(--typography-fontSize-sm);--prose-table-margin: var(--typography-verticalMargin-base) 0;--prose-hr-margin: var(--typography-verticalMargin-base) 0;--prose-li-margin: var(--typography-verticalMargin-sm) 0;--prose-ol-margin: var(--typography-verticalMargin-base) 0;--prose-ul-margin: var(--typography-verticalMargin-base) 0;--prose-blockquote-margin: var(--typography-verticalMargin-base) 0;--prose-a-code-border-style: var(--prose-a-border-style-static);--prose-a-code-border-width: var(--prose-a-border-width);--prose-a-fontWeight: var(--typography-fontWeight-medium);--prose-img-margin: var(--typography-verticalMargin-base) 0;--prose-strong-fontWeight: var(--typography-fontWeight-semibold);--prose-h6-iconSize: var(--typography-fontSize-base);--prose-h6-fontWeight: var(--typography-fontWeight-semibold);--prose-h6-lineHeight: var(--typography-lead-normal);--prose-h6-fontSize: var(--typography-fontSize-lg);--prose-h5-iconSize: var(--typography-fontSize-lg);--prose-h5-fontWeight: var(--typography-fontWeight-semibold);--prose-h5-lineHeight: var(--typography-lead-snug);--prose-h5-fontSize: var(--typography-fontSize-xl);--prose-h4-iconSize: var(--typography-fontSize-lg);--prose-h4-letterSpacing: var(--typography-letterSpacing-tight);--prose-h4-fontWeight: var(--typography-fontWeight-semibold);--prose-h4-lineHeight: var(--typography-lead-snug);--prose-h4-fontSize: var(--typography-fontSize-2xl);--prose-h3-iconSize: var(--typography-fontSize-xl);--prose-h3-letterSpacing: var(--typography-letterSpacing-tight);--prose-h3-fontWeight: var(--typography-fontWeight-semibold);--prose-h3-lineHeight: var(--typography-lead-snug);--prose-h3-fontSize: var(--typography-fontSize-3xl);--prose-h2-iconSize: var(--typography-fontSize-2xl);--prose-h2-letterSpacing: var(--typography-letterSpacing-tight);--prose-h2-fontWeight: var(--typography-fontWeight-semibold);--prose-h2-lineHeight: var(--typography-lead-tight);--prose-h2-fontSize: var(--typography-fontSize-4xl);--prose-h1-iconSize: var(--typography-fontSize-3xl);--prose-h1-letterSpacing: var(--typography-letterSpacing-tight);--prose-h1-fontWeight: var(--typography-fontWeight-bold);--prose-h1-lineHeight: var(--typography-lead-tight);--prose-h1-fontSize: var(--typography-fontSize-5xl);--prose-p-br-margin: var(--typography-verticalMargin-base) 0 0 0;--prose-p-margin: var(--typography-verticalMargin-base) 0;--prose-p-lineHeight: var(--typography-lead-normal);--prose-p-fontSize: var(--typography-fontSize-base);--typography-color-secondary-900: var(--color-gray-900);--typography-color-secondary-800: var(--color-gray-800);--typography-color-secondary-700: var(--color-gray-700);--typography-color-secondary-600: var(--color-gray-600);--typography-color-secondary-500: var(--color-gray-500);--typography-color-secondary-400: var(--color-gray-400);--typography-color-secondary-300: var(--color-gray-300);--typography-color-secondary-200: var(--color-gray-200);--typography-color-secondary-100: var(--color-gray-100);--typography-color-secondary-50: var(--color-gray-50);--typography-color-primary-900: var(--color-primary-900);--typography-color-primary-800: var(--color-primary-800);--typography-color-primary-700: var(--color-primary-700);--typography-color-primary-600: var(--color-primary-600);--typography-color-primary-500: var(--color-primary-500);--typography-color-primary-400: var(--color-primary-400);--typography-color-primary-300: var(--color-primary-300);--typography-color-primary-200: var(--color-primary-200);--typography-color-primary-100: var(--color-primary-100);--typography-color-primary-50: var(--color-primary-50);--typography-font-code: var(--font-mono);--typography-font-body: var(--font-sans);--typography-font-display: var(--font-sans);--typography-body-backgroundColor: var(--color-white);--typography-body-color: var(--color-black);--elements-state-danger-borderColor-secondary: var(--color-red-200);--elements-state-danger-borderColor-primary: var(--color-red-100);--elements-state-danger-backgroundColor-secondary: var(--color-red-100);--elements-state-danger-backgroundColor-primary: var(--color-red-50);--elements-state-danger-color-secondary: var(--color-red-600);--elements-state-danger-color-primary: var(--color-red-500);--elements-state-warning-borderColor-secondary: var(--color-yellow-200);--elements-state-warning-borderColor-primary: var(--color-yellow-100);--elements-state-warning-backgroundColor-secondary: var(--color-yellow-100);--elements-state-warning-backgroundColor-primary: var(--color-yellow-50);--elements-state-warning-color-secondary: var(--color-yellow-700);--elements-state-warning-color-primary: var(--color-yellow-600);--elements-state-success-borderColor-secondary: var(--color-green-200);--elements-state-success-borderColor-primary: var(--color-green-100);--elements-state-success-backgroundColor-secondary: var(--color-green-100);--elements-state-success-backgroundColor-primary: var(--color-green-50);--elements-state-success-color-secondary: var(--color-green-600);--elements-state-success-color-primary: var(--color-green-500);--elements-state-info-borderColor-secondary: var(--color-blue-200);--elements-state-info-borderColor-primary: var(--color-blue-100);--elements-state-info-backgroundColor-secondary: var(--color-blue-100);--elements-state-info-backgroundColor-primary: var(--color-blue-50);--elements-state-info-color-secondary: var(--color-blue-600);--elements-state-info-color-primary: var(--color-blue-500);--elements-state-primary-borderColor-secondary: var(--color-primary-200);--elements-state-primary-borderColor-primary: var(--color-primary-100);--elements-state-primary-backgroundColor-secondary: var(--color-primary-100);--elements-state-primary-backgroundColor-primary: var(--color-primary-50);--elements-state-primary-color-secondary: var(--color-primary-700);--elements-state-primary-color-primary: var(--color-primary-600);--elements-surface-secondary-backgroundColor: var(--color-gray-200);--elements-surface-primary-backgroundColor: var(--color-gray-100);--elements-surface-background-base: var(--color-gray-100);--elements-border-secondary-static: var(--color-gray-200);--elements-border-primary-hover: var(--color-gray-200);--elements-border-primary-static: var(--color-gray-100);--elements-container-padding-md: var(--space-6);--elements-container-padding-sm: var(--space-6);--elements-container-padding-xs: var(--space-4);--elements-container-padding-mobile: var(--space-4);--elements-text-secondary-color-hover: var(--color-gray-700);--elements-text-secondary-color-static: var(--color-gray-500);--elements-text-primary-color-static: var(--color-gray-900);--text-6xl-lineHeight: var(--lead-none);--text-6xl-fontSize: var(--fontSize-6xl);--text-5xl-lineHeight: var(--lead-none);--text-5xl-fontSize: var(--fontSize-5xl);--text-4xl-lineHeight: var(--lead-10);--text-4xl-fontSize: var(--fontSize-4xl);--text-3xl-lineHeight: var(--lead-9);--text-3xl-fontSize: var(--fontSize-3xl);--text-2xl-lineHeight: var(--lead-8);--text-2xl-fontSize: var(--fontSize-2xl);--text-xl-lineHeight: var(--lead-7);--text-xl-fontSize: var(--fontSize-xl);--text-lg-lineHeight: var(--lead-7);--text-lg-fontSize: var(--fontSize-lg);--text-base-lineHeight: var(--lead-6);--text-base-fontSize: var(--fontSize-base);--text-sm-lineHeight: var(--lead-5);--text-sm-fontSize: var(--fontSize-sm);--text-xs-lineHeight: var(--lead-4);--text-xs-fontSize: var(--fontSize-xs);--color-shadow: var(--color-gray-400);--color-secondary-900: var(--color-gray-900);--color-secondary-800: var(--color-gray-800);--color-secondary-700: var(--color-gray-700);--color-secondary-600: var(--color-gray-600);--color-secondary-500: var(--color-gray-500);--color-secondary-400: var(--color-gray-400);--color-secondary-300: var(--color-gray-300);--color-secondary-200: var(--color-gray-200);--color-secondary-100: var(--color-gray-100);--color-secondary-50: var(--color-gray-50);--prose-code-inline-backgroundColor: var(--typography-color-secondary-100);--prose-code-inline-color: var(--typography-color-secondary-700);--prose-code-block-backgroundColor: var(--typography-color-secondary-100);--prose-code-block-color: var(--typography-color-secondary-700);--prose-code-block-border-color: var(--typography-color-secondary-200);--prose-tbody-tr-borderBottom-color: var(--typography-color-secondary-200);--prose-th-color: var(--typography-color-secondary-600);--prose-thead-borderBottom-color: var(--typography-color-secondary-200);--prose-thead-border-color: var(--typography-color-secondary-300);--prose-hr-color: var(--typography-color-secondary-200);--prose-blockquote-border-color: var(--typography-color-secondary-200);--prose-blockquote-color: var(--typography-color-secondary-500);--prose-a-code-background-hover: var(--typography-color-primary-50);--prose-a-code-border-color-hover: var(--typography-color-primary-500);--prose-a-code-border-color-static: var(--typography-color-secondary-400);--prose-a-color-hover: var(--typography-color-primary-500);--shadow-2xl: 0px 25px 50px -12px var(--color-shadow);--shadow-xl: 0px 20px 25px -5px var(--color-shadow), 0px 8px 10px -6px var(--color-shadow);--shadow-lg: 0px 10px 15px -3px var(--color-shadow), 0px 4px 6px -4px var(--color-shadow);--shadow-md: 0px 4px 6px -1px var(--color-shadow), 0px 2px 4px -2px var(--color-shadow);--shadow-sm: 0px 1px 3px 0px var(--color-shadow), 0px 1px 2px -1px var(--color-shadow);--shadow-xs: 0px 1px 2px 0px var(--color-shadow); } }@media { :root.dark {--pinceau-mq: dark; --prose-code-block-backdropFilter: contrast(1);--prose-ol-li-markerColor: currentColor;--prose-ul-li-markerColor: currentColor;--prose-a-code-color-hover: currentColor;--prose-a-code-color-static: currentColor;--prose-a-border-color-hover: currentColor;--prose-a-border-color-static: currentColor;--prose-a-color-static: inherit;--elements-backdrop-background: #0c0d0ccc;--docus-search-results-selected-backgroundColor: var(--color-gray-700);--docus-search-input-backgroundColor: var(--color-gray-800);--docus-search-input-borderColor: transparent;--docus-header-title-color-static: var(--color-gray-100);--docus-body-color: var(--color-gray-200);--docus-body-backgroundColor: var(--color-black);--typography-body-backgroundColor: var(--color-black);--typography-body-color: var(--color-white);--elements-state-danger-borderColor-secondary: var(--color-red-700);--elements-state-danger-borderColor-primary: var(--color-red-800);--elements-state-danger-backgroundColor-secondary: var(--color-red-800);--elements-state-danger-backgroundColor-primary: var(--color-red-900);--elements-state-danger-color-secondary: var(--color-red-200);--elements-state-danger-color-primary: var(--color-red-300);--elements-state-warning-borderColor-secondary: var(--color-yellow-700);--elements-state-warning-borderColor-primary: var(--color-yellow-800);--elements-state-warning-backgroundColor-secondary: var(--color-yellow-800);--elements-state-warning-backgroundColor-primary: var(--color-yellow-900);--elements-state-warning-color-secondary: var(--color-yellow-200);--elements-state-warning-color-primary: var(--color-yellow-400);--elements-state-success-borderColor-secondary: var(--color-green-700);--elements-state-success-borderColor-primary: var(--color-green-800);--elements-state-success-backgroundColor-secondary: var(--color-green-800);--elements-state-success-backgroundColor-primary: var(--color-green-900);--elements-state-success-color-secondary: var(--color-green-200);--elements-state-success-color-primary: var(--color-green-400);--elements-state-info-borderColor-secondary: var(--color-blue-700);--elements-state-info-borderColor-primary: var(--color-blue-800);--elements-state-info-backgroundColor-secondary: var(--color-blue-800);--elements-state-info-backgroundColor-primary: var(--color-blue-900);--elements-state-info-color-secondary: var(--color-blue-200);--elements-state-info-color-primary: var(--color-blue-400);--elements-state-primary-borderColor-secondary: var(--color-primary-700);--elements-state-primary-borderColor-primary: var(--color-primary-800);--elements-state-primary-backgroundColor-secondary: var(--color-primary-800);--elements-state-primary-backgroundColor-primary: var(--color-primary-900);--elements-state-primary-color-secondary: var(--color-primary-200);--elements-state-primary-color-primary: var(--color-primary-400);--elements-surface-secondary-backgroundColor: var(--color-gray-800);--elements-surface-primary-backgroundColor: var(--color-gray-900);--elements-surface-background-base: var(--color-gray-900);--elements-border-secondary-static: var(--color-gray-800);--elements-border-primary-hover: var(--color-gray-800);--elements-border-primary-static: var(--color-gray-900);--elements-text-secondary-color-hover: var(--color-gray-200);--elements-text-secondary-color-static: var(--color-gray-400);--elements-text-primary-color-static: var(--color-gray-50);--color-shadow: var(--color-gray-800);--prose-code-inline-backgroundColor: var(--typography-color-secondary-800);--prose-code-inline-color: var(--typography-color-secondary-200);--prose-code-block-backgroundColor: var(--typography-color-secondary-900);--prose-code-block-color: var(--typography-color-secondary-200);--prose-code-block-border-color: var(--typography-color-secondary-800);--prose-tbody-tr-borderBottom-color: var(--typography-color-secondary-800);--prose-th-color: var(--typography-color-secondary-400);--prose-thead-borderBottom-color: var(--typography-color-secondary-800);--prose-thead-border-color: var(--typography-color-secondary-600);--prose-hr-color: var(--typography-color-secondary-800);--prose-blockquote-border-color: var(--typography-color-secondary-700);--prose-blockquote-color: var(--typography-color-secondary-400);--prose-a-code-background-hover: var(--typography-color-primary-900);--prose-a-code-border-color-hover: var(--typography-color-primary-600);--prose-a-code-border-color-static: var(--typography-color-secondary-600);--prose-a-color-hover: var(--typography-color-primary-400); } }@media (min-width: 640px) { :root {--pinceau-mq: sm; --docus-search-results-window-maxHeight: 320px;--docus-search-results-window-marginTop: 20vh;--docus-footer-height: 100px;--docus-search-results-window-borderRadius: var(--radii-xs);--docus-search-results-window-marginX: var(--space-4);--docus-header-logo-height: var(--space-7); } }</style><script>"use strict";(()=>{const a=window,e=document.documentElement,m=["dark","light"],c=window&&window.localStorage&&window.localStorage.getItem&&window.localStorage.getItem("nuxt-color-mode")||"system";let n=c==="system"?d():c;const l=e.getAttribute("data-color-mode-forced");l&&(n=l),i(n),a["__NUXT_COLOR_MODE__"]={preference:c,value:n,getColorScheme:d,addColorScheme:i,removeColorScheme:f};function i(o){const t=""+o+"",s="theme";e.classList?e.classList.add(t):e.className+=" "+t,s&&e.setAttribute("data-"+s,o)}function f(o){const t=""+o+"",s="theme";e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(t,"g"),""),s&&e.removeAttribute("data-"+s)}function r(o){return a.matchMedia("(prefers-color-scheme"+o+")")}function d(){if(a.matchMedia&&r("").media!=="not all"){for(const o of m)if(r(":"+o).matches)return o}return"light"}})();
</script></head>
<body ><!----><!--teleport anchor--><!----><!--teleport anchor--><div id="__nuxt"><div class="app-layout" data-v-5c2f7786><div class="nuxt-progress" style="width:0%;opacity:0;background-size:Infinity% auto;" data-v-5c2f7786></div><header class="has-dialog" data-v-5c2f7786 data-v-f465a985><div class="container pv-vEwQwj pc-NpSeat" data-v-f465a985 data-v-a8d7e2a7><!--[--><div class="section left" data-v-f465a985><!--[--><button aria-label="Menu" data-v-8fd30205><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" role="img" class="icon" data-v-8fd30205 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button><!--teleport start--><!--teleport end--><!--]--><a href="/" class="navbar-logo" aria-label="Docus" data-v-f465a985 data-v-58a8631e><span class="logo" data-v-58a8631e><svg viewbox="0 0 167 44" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-58a8631e data-v-fca4477e><path d="M60 34.5945H70.2569C78.3172 34.5945 83.064 29.6369 83.064 21.1959V21.159C83.064 12.7365 78.2986 8 70.2569 8H60V34.5945ZM65.6217 29.987V12.5891H69.5867C74.5197 12.5891 77.3306 15.63 77.3306 21.1775V21.2143C77.3306 26.9645 74.6128 29.987 69.5867 29.987H65.6217Z" fill="currentColor" data-v-fca4477e></path><path d="M95.1966 35C101.228 35 105.081 31.1666 105.081 24.716V24.6792C105.081 18.284 101.153 14.4321 95.178 14.4321C89.2211 14.4321 85.312 18.3208 85.312 24.6792V24.716C85.312 31.1481 89.1281 35 95.1966 35ZM95.2152 30.7795C92.5346 30.7795 90.8407 28.5863 90.8407 24.716V24.6792C90.8407 20.8642 92.5532 18.6526 95.178 18.6526C97.8213 18.6526 99.5525 20.8642 99.5525 24.6792V24.716C99.5525 28.5679 97.8585 30.7795 95.2152 30.7795Z" fill="currentColor" data-v-fca4477e></path><path d="M116.823 35C122.147 35 125.59 31.7195 125.851 27.4068V27.2962H120.788L120.769 27.4621C120.397 29.4526 119.038 30.7795 116.86 30.7795C114.179 30.7795 112.504 28.5863 112.504 24.716V24.6976C112.504 20.9195 114.179 18.6526 116.841 18.6526C119.094 18.6526 120.415 20.0901 120.751 21.97L120.788 22.1358H125.832V22.0068C125.628 17.7311 122.184 14.4321 116.767 14.4321C110.792 14.4321 106.975 18.3577 106.975 24.6792V24.6976C106.975 31.0744 110.736 35 116.823 35Z" fill="currentColor" data-v-fca4477e></path><path d="M135.08 35C138.095 35 140.143 33.5993 141.167 31.3324H141.278V34.5945H146.714V14.8375H141.278V26.1904C141.278 28.7706 139.733 30.5399 137.295 30.5399C134.856 30.5399 133.628 29.0471 133.628 26.4669V14.8375H128.192V27.5911C128.192 32.2171 130.687 35 135.08 35Z" fill="currentColor" data-v-fca4477e></path><path d="M158.27 35C163.407 35 167 32.4567 167 28.5863V28.5679C167 25.656 165.287 24.0341 161.118 23.1679L157.73 22.4491C155.719 22.0253 155.031 21.3618 155.031 20.3481V20.3297C155.031 19.058 156.203 18.2287 158.083 18.2287C160.094 18.2287 161.267 19.2976 161.453 20.7167L161.471 20.8642H166.479V20.6799C166.348 17.215 163.389 14.4321 158.083 14.4321C153.001 14.4321 149.725 16.8648 149.725 20.6246V20.643C149.725 23.5918 151.68 25.5085 155.552 26.3195L158.94 27.0198C160.894 27.4437 161.564 28.0519 161.564 29.1024V29.1208C161.564 30.3925 160.317 31.185 158.27 31.185C156.092 31.185 154.919 30.2819 154.565 28.7338L154.528 28.5679H149.223L149.241 28.7338C149.669 32.4751 152.741 35 158.27 35Z" fill="currentColor" data-v-fca4477e></path><mask id="mask0_109_36" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="44" height="44" data-v-fca4477e><path fill-rule="evenodd" clip-rule="evenodd" d="M0 21.8104C0 9.76479 9.80347 0 21.8967 0C33.99 0 43.7935 9.76479 43.7935 21.8104C43.7935 33.8559 33.99 43.6207 21.8967 43.6207H0V21.8104ZM19.5294 17.0944C22.1442 17.0944 24.2641 19.2059 24.2641 21.8104C24.2641 24.4148 22.1442 26.526 19.5294 26.526C16.9147 26.526 14.7948 24.4148 14.7948 21.8101C14.7948 19.2059 16.9147 17.0944 19.5294 17.0944V17.0944ZM38.4674 21.8104C38.4674 19.2059 36.3475 17.0944 33.7328 17.0944C31.1183 17.0944 28.9984 19.2059 28.9984 21.8104C28.9984 24.4148 31.1183 26.526 33.7328 26.526C36.3475 26.526 38.4674 24.4148 38.4674 21.8101V21.8104Z" fill="white" data-v-fca4477e></path></mask><g mask="url(#mask0_109_36)" data-v-fca4477e><path fill-rule="evenodd" clip-rule="evenodd" d="M0 21.8104C0 9.76479 9.80347 0 21.8967 0C33.99 0 43.7935 9.76479 43.7935 21.8104C43.7935 33.8559 33.99 43.6207 21.8967 43.6207H0V21.8104ZM19.5294 17.0944C22.1442 17.0944 24.2641 19.2059 24.2641 21.8104C24.2641 24.4148 22.1442 26.526 19.5294 26.526C16.9147 26.526 14.7948 24.4148 14.7948 21.8101C14.7948 19.2059 16.9147 17.0944 19.5294 17.0944V17.0944ZM38.4674 21.8104C38.4674 19.2059 36.3475 17.0944 33.7328 17.0944C31.1183 17.0944 28.9984 19.2059 28.9984 21.8104C28.9984 24.4148 31.1183 26.526 33.7328 26.526C36.3475 26.526 38.4674 24.4148 38.4674 21.8101V21.8104Z" fill="currentColor" data-v-fca4477e></path><path d="M9.9987e-06 43.6206H-0.156525V43.7762H9.9987e-06V43.6206ZM21.8967 -0.156006C9.71704 -0.156006 -0.156525 9.67861 -0.156525 21.8106H0.156545C0.156545 9.8508 9.88991 0.155828 21.8967 0.155828V-0.156006ZM43.9497 21.8103C43.9497 9.67861 34.0764 -0.156006 21.8967 -0.156006V0.155828C33.9036 0.155828 43.6369 9.8508 43.6369 21.8103H43.9497ZM21.8967 43.7762C34.0764 43.7762 43.9497 33.9419 43.9497 21.8103H43.6369C43.6369 33.7697 33.9036 43.4647 21.8967 43.4647V43.7762V43.7762ZM9.9987e-06 43.7762H21.8967V43.4647H9.9987e-06V43.7762ZM-0.156525 21.8103V43.6206H0.156545V21.8103H-0.156525ZM24.4203 21.8103C24.4203 19.1197 22.2306 16.9387 19.5294 16.9387V17.2502C22.0577 17.2502 24.1075 19.2916 24.1075 21.8103H24.4203V21.8103ZM19.5294 26.6816C22.2306 26.6816 24.4203 24.5005 24.4203 21.8103H24.1075C24.1075 24.3286 22.058 26.37 19.5294 26.37V26.6816V26.6816ZM14.6385 21.8106C14.6385 24.5008 16.8282 26.6819 19.5294 26.6819V26.3703C17.0011 26.3703 14.9513 24.3289 14.9513 21.8106H14.6385ZM19.5297 16.9387C16.8285 16.9387 14.6388 19.1197 14.6388 21.8103H14.9516C14.9516 19.2916 17.0011 17.2502 19.5297 17.2502V16.9387ZM33.7331 17.2502C36.2617 17.2502 38.3112 19.2916 38.3112 21.8103H38.624C38.624 19.1197 36.4343 16.9387 33.7331 16.9387V17.2502V17.2502ZM29.155 21.8103C29.155 19.2916 31.2045 17.2502 33.7328 17.2502V16.9387C31.0319 16.9387 28.8422 19.1197 28.8422 21.8103H29.155ZM33.7328 26.37C31.2045 26.37 29.155 24.3286 29.155 21.8103H28.8422C28.8422 24.5005 31.0319 26.6816 33.7328 26.6816V26.37ZM38.3109 21.8106C38.3109 24.3289 36.2614 26.3703 33.7328 26.3703V26.6819C36.434 26.6819 38.6237 24.5008 38.6237 21.8106H38.3109Z" fill="currentColor" data-v-fca4477e></path></g></svg></span></a></div><div class="section center" data-v-f465a985><a href="/" class="navbar-logo" aria-label="Docus" data-v-f465a985 data-v-58a8631e><span class="logo" data-v-58a8631e><svg viewbox="0 0 167 44" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-58a8631e data-v-fca4477e><path d="M60 34.5945H70.2569C78.3172 34.5945 83.064 29.6369 83.064 21.1959V21.159C83.064 12.7365 78.2986 8 70.2569 8H60V34.5945ZM65.6217 29.987V12.5891H69.5867C74.5197 12.5891 77.3306 15.63 77.3306 21.1775V21.2143C77.3306 26.9645 74.6128 29.987 69.5867 29.987H65.6217Z" fill="currentColor" data-v-fca4477e></path><path d="M95.1966 35C101.228 35 105.081 31.1666 105.081 24.716V24.6792C105.081 18.284 101.153 14.4321 95.178 14.4321C89.2211 14.4321 85.312 18.3208 85.312 24.6792V24.716C85.312 31.1481 89.1281 35 95.1966 35ZM95.2152 30.7795C92.5346 30.7795 90.8407 28.5863 90.8407 24.716V24.6792C90.8407 20.8642 92.5532 18.6526 95.178 18.6526C97.8213 18.6526 99.5525 20.8642 99.5525 24.6792V24.716C99.5525 28.5679 97.8585 30.7795 95.2152 30.7795Z" fill="currentColor" data-v-fca4477e></path><path d="M116.823 35C122.147 35 125.59 31.7195 125.851 27.4068V27.2962H120.788L120.769 27.4621C120.397 29.4526 119.038 30.7795 116.86 30.7795C114.179 30.7795 112.504 28.5863 112.504 24.716V24.6976C112.504 20.9195 114.179 18.6526 116.841 18.6526C119.094 18.6526 120.415 20.0901 120.751 21.97L120.788 22.1358H125.832V22.0068C125.628 17.7311 122.184 14.4321 116.767 14.4321C110.792 14.4321 106.975 18.3577 106.975 24.6792V24.6976C106.975 31.0744 110.736 35 116.823 35Z" fill="currentColor" data-v-fca4477e></path><path d="M135.08 35C138.095 35 140.143 33.5993 141.167 31.3324H141.278V34.5945H146.714V14.8375H141.278V26.1904C141.278 28.7706 139.733 30.5399 137.295 30.5399C134.856 30.5399 133.628 29.0471 133.628 26.4669V14.8375H128.192V27.5911C128.192 32.2171 130.687 35 135.08 35Z" fill="currentColor" data-v-fca4477e></path><path d="M158.27 35C163.407 35 167 32.4567 167 28.5863V28.5679C167 25.656 165.287 24.0341 161.118 23.1679L157.73 22.4491C155.719 22.0253 155.031 21.3618 155.031 20.3481V20.3297C155.031 19.058 156.203 18.2287 158.083 18.2287C160.094 18.2287 161.267 19.2976 161.453 20.7167L161.471 20.8642H166.479V20.6799C166.348 17.215 163.389 14.4321 158.083 14.4321C153.001 14.4321 149.725 16.8648 149.725 20.6246V20.643C149.725 23.5918 151.68 25.5085 155.552 26.3195L158.94 27.0198C160.894 27.4437 161.564 28.0519 161.564 29.1024V29.1208C161.564 30.3925 160.317 31.185 158.27 31.185C156.092 31.185 154.919 30.2819 154.565 28.7338L154.528 28.5679H149.223L149.241 28.7338C149.669 32.4751 152.741 35 158.27 35Z" fill="currentColor" data-v-fca4477e></path><mask id="mask0_109_36" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="44" height="44" data-v-fca4477e><path fill-rule="evenodd" clip-rule="evenodd" d="M0 21.8104C0 9.76479 9.80347 0 21.8967 0C33.99 0 43.7935 9.76479 43.7935 21.8104C43.7935 33.8559 33.99 43.6207 21.8967 43.6207H0V21.8104ZM19.5294 17.0944C22.1442 17.0944 24.2641 19.2059 24.2641 21.8104C24.2641 24.4148 22.1442 26.526 19.5294 26.526C16.9147 26.526 14.7948 24.4148 14.7948 21.8101C14.7948 19.2059 16.9147 17.0944 19.5294 17.0944V17.0944ZM38.4674 21.8104C38.4674 19.2059 36.3475 17.0944 33.7328 17.0944C31.1183 17.0944 28.9984 19.2059 28.9984 21.8104C28.9984 24.4148 31.1183 26.526 33.7328 26.526C36.3475 26.526 38.4674 24.4148 38.4674 21.8101V21.8104Z" fill="white" data-v-fca4477e></path></mask><g mask="url(#mask0_109_36)" data-v-fca4477e><path fill-rule="evenodd" clip-rule="evenodd" d="M0 21.8104C0 9.76479 9.80347 0 21.8967 0C33.99 0 43.7935 9.76479 43.7935 21.8104C43.7935 33.8559 33.99 43.6207 21.8967 43.6207H0V21.8104ZM19.5294 17.0944C22.1442 17.0944 24.2641 19.2059 24.2641 21.8104C24.2641 24.4148 22.1442 26.526 19.5294 26.526C16.9147 26.526 14.7948 24.4148 14.7948 21.8101C14.7948 19.2059 16.9147 17.0944 19.5294 17.0944V17.0944ZM38.4674 21.8104C38.4674 19.2059 36.3475 17.0944 33.7328 17.0944C31.1183 17.0944 28.9984 19.2059 28.9984 21.8104C28.9984 24.4148 31.1183 26.526 33.7328 26.526C36.3475 26.526 38.4674 24.4148 38.4674 21.8101V21.8104Z" fill="currentColor" data-v-fca4477e></path><path d="M9.9987e-06 43.6206H-0.156525V43.7762H9.9987e-06V43.6206ZM21.8967 -0.156006C9.71704 -0.156006 -0.156525 9.67861 -0.156525 21.8106H0.156545C0.156545 9.8508 9.88991 0.155828 21.8967 0.155828V-0.156006ZM43.9497 21.8103C43.9497 9.67861 34.0764 -0.156006 21.8967 -0.156006V0.155828C33.9036 0.155828 43.6369 9.8508 43.6369 21.8103H43.9497ZM21.8967 43.7762C34.0764 43.7762 43.9497 33.9419 43.9497 21.8103H43.6369C43.6369 33.7697 33.9036 43.4647 21.8967 43.4647V43.7762V43.7762ZM9.9987e-06 43.7762H21.8967V43.4647H9.9987e-06V43.7762ZM-0.156525 21.8103V43.6206H0.156545V21.8103H-0.156525ZM24.4203 21.8103C24.4203 19.1197 22.2306 16.9387 19.5294 16.9387V17.2502C22.0577 17.2502 24.1075 19.2916 24.1075 21.8103H24.4203V21.8103ZM19.5294 26.6816C22.2306 26.6816 24.4203 24.5005 24.4203 21.8103H24.1075C24.1075 24.3286 22.058 26.37 19.5294 26.37V26.6816V26.6816ZM14.6385 21.8106C14.6385 24.5008 16.8282 26.6819 19.5294 26.6819V26.3703C17.0011 26.3703 14.9513 24.3289 14.9513 21.8106H14.6385ZM19.5297 16.9387C16.8285 16.9387 14.6388 19.1197 14.6388 21.8103H14.9516C14.9516 19.2916 17.0011 17.2502 19.5297 17.2502V16.9387ZM33.7331 17.2502C36.2617 17.2502 38.3112 19.2916 38.3112 21.8103H38.624C38.624 19.1197 36.4343 16.9387 33.7331 16.9387V17.2502V17.2502ZM29.155 21.8103C29.155 19.2916 31.2045 17.2502 33.7328 17.2502V16.9387C31.0319 16.9387 28.8422 19.1197 28.8422 21.8103H29.155ZM33.7328 26.37C31.2045 26.37 29.155 24.3286 29.155 21.8103H28.8422C28.8422 24.5005 31.0319 26.6816 33.7328 26.6816V26.37ZM38.3109 21.8106C38.3109 24.3289 36.2614 26.3703 33.7328 26.3703V26.6819C36.434 26.6819 38.6237 24.5008 38.6237 21.8106H38.3109Z" fill="currentColor" data-v-fca4477e></path></g></svg></span></a><!----></div><div class="section right" data-v-f465a985><!--[--><button type="button" aria-label="Search" data-v-98e4ee4b><span class="content" data-v-98e4ee4b><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-98e4ee4b style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21l-6-6m2-5a7 7 0 1 1-14 0a7 7 0 0 1 14 0Z"/></svg><span data-v-98e4ee4b>Search</span><span data-v-98e4ee4b><kbd data-v-98e4ee4b>⌘</kbd><kbd data-v-98e4ee4b>K</kbd></span></span></button><!--teleport start--><!--teleport end--><!--]--><button aria-label="Color Mode" data-v-f465a985 data-v-87324333><span data-v-87324333>...</span></button><div class="social-icons" data-v-f465a985><!--[--><a href="https://twitter.com/nuxt_js" rel="noopener noreferrer" target="_blank" title="nuxt_js" aria-label="nuxt_js" data-v-22569e45><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-22569e45 style="" width="1em" height="1em" viewBox="0 0 512 512" data-v-e610b8e3><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645c0 138.72-105.583 298.558-298.558 298.558c-59.452 0-114.68-17.219-161.137-47.106c8.447.974 16.568 1.299 25.34 1.299c49.055 0 94.213-16.568 130.274-44.832c-46.132-.975-84.792-31.188-98.112-72.772c6.498.974 12.995 1.624 19.818 1.624c9.421 0 18.843-1.3 27.614-3.573c-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319c-28.264-18.843-46.781-51.005-46.781-87.391c0-19.492 5.197-37.36 14.294-52.954c51.655 63.675 129.3 105.258 216.365 109.807c-1.624-7.797-2.599-15.918-2.599-24.04c0-57.828 46.782-104.934 104.934-104.934c30.213 0 57.502 12.67 76.67 33.137c23.715-4.548 46.456-13.32 66.599-25.34c-7.798 24.366-24.366 44.833-46.132 57.827c21.117-2.273 41.584-8.122 60.426-16.243c-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a><a href="https://github.com/nuxt-themes/docus" rel="noopener noreferrer" target="_blank" title="nuxt-themes/docus" aria-label="nuxt-themes/docus" data-v-22569e45><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-22569e45 style="" width="1em" height="1em" viewBox="0 0 496 512" data-v-e610b8e3><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2c1.6 1.6 3.9 2.3 5.2 1c1.3-1 1-3.3-.7-5.2c-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9c1.6 1 3.6.7 4.3-.7c.7-1.3-.3-2.9-2.3-3.9c-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2c2.3 2.3 5.2 2.6 6.5 1c1.3-1.3.7-4.3-1.3-6.2c-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9c1.6 2.3 4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2c-1.4-2.3-4-3.3-5.6-2z"/></svg></a><a href="https://nuxt.com" rel="noopener noreferrer" target="_blank" title="Nuxt" aria-label="Nuxt" data-v-22569e45><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-22569e45 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="currentColor" d="M13.464 19.83h8.922c.283 0 .562-.073.807-.21a1.59 1.59 0 0 0 .591-.574a1.53 1.53 0 0 0 .216-.783a1.529 1.529 0 0 0-.217-.782L17.792 7.414a1.59 1.59 0 0 0-.591-.573a1.652 1.652 0 0 0-.807-.21c-.283 0-.562.073-.807.21a1.59 1.59 0 0 0-.59.573L13.463 9.99L10.47 4.953a1.591 1.591 0 0 0-.591-.573a1.653 1.653 0 0 0-.807-.21c-.284 0-.562.073-.807.21a1.591 1.591 0 0 0-.591.573L.216 17.481a1.53 1.53 0 0 0-.217.782c0 .275.074.545.216.783a1.59 1.59 0 0 0 .59.574c.246.137.525.21.808.21h5.6c2.22 0 3.856-.946 4.982-2.79l2.733-4.593l1.464-2.457l4.395 7.382h-5.859Zm-6.341-2.46l-3.908-.002l5.858-9.842l2.923 4.921l-1.957 3.29c-.748 1.196-1.597 1.632-2.916 1.632z"/></svg></a><!--]--></div></div><!--]--></div></header><main data-v-5c2f7786><!--[--><div class="document-driven-page"><div class="container pv-vEwQwj pc-00EDTb docs-page-content fluid has-toc has-aside" data-v-73d798d2 data-v-a8d7e2a7><!--[--><aside class="aside-nav" data-v-73d798d2><nav class="app-aside" data-v-73d798d2 data-v-89fb8999><ul class="docs-aside-tree" data-v-89fb8999 data-v-d42239fd><!--[--><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 256 256" data-v-e610b8e3><g fill="currentColor"><path d="M184.13 147.7a8.08 8.08 0 0 0-2.54 7.89l13.52 58.54a8 8 0 0 1-11.89 8.69l-51.1-31a7.93 7.93 0 0 0-8.24 0l-51.1 31a8 8 0 0 1-11.89-8.69l13.52-58.54a8.08 8.08 0 0 0-2.54-7.89l-45.11-39.35a8 8 0 0 1 4.54-14.07l59.46-5.14a8 8 0 0 0 6.67-4.88l23.23-55.36a8 8 0 0 1 14.68 0l23.23 55.36a8 8 0 0 0 6.67 4.88l59.46 5.14a8 8 0 0 1 4.54 14.07Z" opacity=".2"/><path d="M239.2 97.29a16 16 0 0 0-13.81-11L166 81.17l-23.28-55.36a15.95 15.95 0 0 0-29.44 0L90.07 81.17l-59.46 5.15a16 16 0 0 0-9.11 28.06l45.11 39.42l-13.52 58.54a16 16 0 0 0 23.84 17.34l51-31l51.11 31a16 16 0 0 0 23.84-17.34l-13.51-58.6l45.1-39.36a16 16 0 0 0 4.73-17.09Zm-15.22 5l-45.1 39.36a16 16 0 0 0-5.08 15.71L187.35 216l-51.07-31a15.9 15.9 0 0 0-16.54 0l-51 31l13.46-58.6a16 16 0 0 0-5.08-15.71L32 102.35a.37.37 0 0 1 0-.09l59.44-5.14a16 16 0 0 0 13.35-9.75L128 32.08l23.2 55.29a16 16 0 0 0 13.35 9.75l59.45 5.14v.07Z"/></g></svg><span data-v-d42239fd>Introduction</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 20l5-5l5 5M7 4l5 5l5-5"/></svg></span></button><ul class="docs-aside-tree recursive" style="" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/introduction/getting-started" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Getting Started</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/introduction/project-structure" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Project Structure</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/introduction/writing-pages" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Writing Pages</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/introduction/configuration" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Configuration</span></span></a><!----></li><!--]--></ul></li><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 4v12l-4-2l-4 2V4M6 20h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2Z"/></svg><span data-v-d42239fd>API</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 20l5-5l5 5M7 4l5 5l5-5"/></svg></span></button><ul class="docs-aside-tree recursive" style="" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/api/components" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Components</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/api/composables" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Composables</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/api/layouts" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Layouts</span></span></a><!----></li><!--]--></ul></li><li class="" data-v-d42239fd><button class="title-collapsible-button" data-v-d42239fd><span class="content" data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 4v12l-4-2l-4 2V4M6 20h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2Z"/></svg><span data-v-d42239fd>Engineering</span></span><span data-v-d42239fd><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon collapsible-icon" data-v-d42239fd style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 20l5-5l5 5M7 4l5 5l5-5"/></svg></span></button><ul class="docs-aside-tree recursive" style="" data-v-d42239fd data-v-d42239fd><!--[--><li class="has-parent-icon bordered" data-v-d42239fd><a href="/engineering/helm-chart-definition" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>headless-authentication-service</span></span></a><!----></li><li class="has-parent-icon bordered active" data-v-d42239fd><a aria-current="page" href="/engineering/service-overview" class="router-link-active router-link-exact-active link padded active" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Service Overview</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/engineering/service" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Protocol Documentation</span></span></a><!----></li><li class="has-parent-icon bordered" data-v-d42239fd><a href="/engineering/setup" class="link padded" data-v-d42239fd><span class="content" data-v-d42239fd><!----><span data-v-d42239fd>Setup</span></span></a><!----></li><!--]--></ul></li><!--]--></ul></nav></aside><article class="page-body" data-v-73d798d2><!--[--><!--[--><div><p data-v-9dc9c102><!--[--><strong data-v-84b57b07><!--[-->Simifinii: Authentication Microservice Design Document<!--]--></strong><!--]--></p><p data-v-9dc9c102><!--[--><strong data-v-84b57b07><!--[-->Date<!--]--></strong>: 2021-11-05<!--]--></p><p data-v-9dc9c102><!--[--><strong data-v-84b57b07><!--[-->Project<!--]--></strong>: Simifinii: Authentication Microservice<!--]--></p><p data-v-9dc9c102><!--[--><strong data-v-84b57b07><!--[-->Audience<!--]--></strong>: Engineering<!--]--></p><p data-v-9dc9c102><!--[--><strong data-v-84b57b07><!--[-->Authors<!--]--></strong>: Srikar, Yoan Yomba<!--]--></p><p data-v-9dc9c102><!--[--><strong data-v-84b57b07><!--[-->Emails<!--]--></strong>: <a href="mailto:yoanyombapro@gmail.com" rel="noopener noreferrer" data-v-692834dd><!--[-->yoanyombapro@gmail.com<!--]--></a><!--]--></p><p data-v-9dc9c102><!--[--><strong data-v-84b57b07><!--[-->Reply To<!--]--></strong>: <a href="mailto:yoanyombapro@gmail.com" rel="noopener noreferrer" data-v-692834dd><!--[-->yoanyombapro@gmail.com<!--]--></a><!--]--></p><h2 id="introduction" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#introduction" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Introduction<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->The primary goal of this service is to serve as the primary means of authentication within the backend system.<!--]--></p><h2 id="motivation" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#motivation" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Motivation<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->Authentication is an extremely important aspect of an any platform due in part to the fact that data protection at the user level must be enforced as well as access level permissions. Authentication however, in a distributed system provides more complexities. In monolithic applications, authentication and authorization can be performed via sessions. However, in a distributed system, since multiple instances of a service can be deployed at one time, enforcing user requests to the originating session instance (sticky sessions) isn’t viable and introduces a ton of operational overhead.<!--]--></p><p data-v-9dc9c102><!--[-->With this in mind, we at the simifinii aim to implement our authorization scheme via 2 sets of services via json web tokens (JWT). We also make use of a distributed cache for session storage which ensures that we don’t need to maintain stickiness across instances of a server. The authentication framework developed by us consists of 2 service instances. One is a stateful instance which utilizes the open-sourced keratin-authn microservice and interfaces with either a postgres or mysql database.The second instance is a headless authentication service which is stateless and serves as an interface through which the keratin-authn service can be interacted with.<!--]--></p><p data-v-9dc9c102><!--[-->The rest of this design document provides further details pertinent to this implementation.<!--]--></p><h2 id="potential-solutions" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#potential-solutions" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Potential Solutions<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->Proposed above is a solution that utilizes 2 sets of services. One which serves as a stateless headless service and interacts with the keratin authn stateful service via APIs. The reason for this design decision is to first abstract the private and public api’s keratin authn exposes from the context of other consuming services. Without this, all calling services would have to be aware of public and private endpoints as well as properly set headers. Through the headless authentication service, these can automatically be set in requests prior to transit.<!--]--></p><p data-v-9dc9c102><!--[-->The reason we picked the open sourced keratin authn service was partly due to the fact that we needed the service to completely own all account credential data completely removing this necessity from other microservices. Additionally we loved its reliance on SQL databases for long term account/credentials data, and its ease of integration into our backend system.<!--]--></p><p data-v-9dc9c102><!--[-->In summary, the API that the authentication handler service provides and its ability to interface with keratin-authn eases the operational overhead all consuming services must absorb.<!--]--></p><h3 id="experimental-implement-after-mvp-launch" data-v-4cf5bb93><a aria-current="page" href="/engineering/service-overview#experimental-implement-after-mvp-launch" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->(EXPERIMENTAL : Implement After MVP Launch)<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->It is important to note one very important point. The headless authentication service withholds a go-routine which continuously polls the message queue’s “record update” channel. The messages in such queues follow the following rubric. They must contain the name of the respective grpc api and the required request field parameters. The go-routine routinely polls the message queue, performs the operation defined by the message via a set of retries and on failures (internal server error) … puts the message back onto the queue.<!--]--></p><h2 id="assumptions" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#assumptions" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Assumptions<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->No assumptions are currently present. However, this section is prone to change especially as the service level requirements change.<!--]--></p><h2 id="constraintslimitations" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#constraintslimitations" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Constraints/Limitations<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->These sets of services are only meant to provide an authentication mechanism and retain a single source of truth of the state of an account throughout the backend system. Account state updates must propagate to this service via distributed transactions. Consistency holds the highest priority when dealing with account record state within the system.
System Design/Architecture
System Diagram &amp; Flowchart<!--]--></p><p data-v-9dc9c102><!--[--><img src="./images/auth_hdlr_svc.png" alt="image info" data-v-2ef15301><strong data-v-84b57b07><!--[-->Figure 1: Authentication Handler Service<!--]--></strong><!--]--></p><p data-v-9dc9c102><!--[--><img src="./images/auth_svc.png" alt="image info" data-v-2ef15301><strong data-v-84b57b07><!--[-->Figure 2: Authentication Service (Keratin Authn)<!--]--></strong><!--]--></p><p data-v-9dc9c102><!--[--><img src="./images/svc_level_interactions.png" alt="image info" data-v-2ef15301><strong data-v-84b57b07><!--[-->Figure 3: Service Level Interactions<!--]--></strong><!--]--></p><h2 id="hard-soft-requirements" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#hard-soft-requirements" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Hard &amp; Soft Requirements<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->This is a crucial part of the system. As a result, if either instance goes down, users will inherently be unable to sign into the system, create new accounts, and account records could be in an inconsistent state across the backend. In summary, this would cause an outage.<!--]--></p><p data-v-9dc9c102><!--[-->Since consistency is key to ensuring the system behaves as expected, we must build in resiliency through asynchronous messaging in hopes of enabling failed requests to eventually be processed (eventual consistency). This concept of eventual consistency if truly only relevant for failed requests attempting to modify account record states. In cases of failed sign up/sign in requests due to service unavailability, we must provide the proper alert logic (sev 1 … etc) so that the on-call can fix the problem at hand.<!--]--></p><p data-v-9dc9c102><!--[-->It is important to note that we prioritize data consistency across the backend since lack thereof can have serious implications. Lack of access to the system as a result of complete failure for us although ill-advised can be rectified assuming the on-call tends to the failure in a timely manner. This however entails that granular logs are emitted, the proper set of metrics are defined, critical logic paths are instrumented, and proper monitoring is set in place.<!--]--></p><p data-v-9dc9c102><!--[-->Remember, there is no such thing as “over instrumentation”.<!--]--></p><h2 id="algorithm-pseudocode-for-main-components" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#algorithm-pseudocode-for-main-components" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Algorithm &amp; Pseudocode For Main Components<!--]--><!----></a></h2><h3 id="authentication" data-v-4cf5bb93><a aria-current="page" href="/engineering/service-overview#authentication" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->Authentication<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->The authentication scheme makes use of JWT tokens for authentication. In order for a user to be properly authenticated, he/she must first create an account then go through the account sign up flow. From the context of the frontend, the registration flow varies across user types. However, in the context of the backend, all accounts have similar registration flow and exact sign up flow.<!--]--></p><h3 id="registration" data-v-4cf5bb93><a aria-current="page" href="/engineering/service-overview#registration" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->Registration<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->Registration is a multi-step process that begins at the client and involves a multitude of services. The below step outline this process<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Through a form on the frontend, we collect a user’s credentials and other required pieces of data &amp; perform field validation<!--]--></li><li data-v-4c2f5fb9><!--[-->Send the request to the Api-Gateway
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Api-Gateway obtains from the request object the email and password fields and performs a series of calls to the headless authentication
service. The first endpoint called is the “password score” to ensure the request password is strong enough.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->On failure, we return an error to the client stating the provided password is too weak.<!--]--></li><li data-v-4c2f5fb9><!--[-->On success, we proceed to the next call<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Api-Gateway invokes the “create account” api of the authentication handler service.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Headless Authentication service performs a create account call via the authentication service and returns the id of the created account to
the Api-Gateway.<!--]--></li><li data-v-4c2f5fb9><!--[-->On failure, we return an error to the client stating that the provided credentials are invalid or there is an outage.<!--]--></li><li data-v-4c2f5fb9><!--[-->On success, we perform the next set of operations<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->With the returned ID, the Api-Gateway calls a set of backend services explicitly or through msg queues to create records from their context
and any additional operation such as sending out email, … etc.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->If this fails, the gateway needs to be smart about retrying this operation. ensuring fields are properly validated before the request is
sent from the frontend to the gateway can limit this from happening.<!--]--></li><li data-v-4c2f5fb9><!--[-->NOTE: these set of operations should be performed asynchronously via messages and a queue<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Upon successful creation of the account, we send the successful response to the frontend<!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><p data-v-9dc9c102><!--[-->The only difference between the set of service level interactions in the backend between merchant and shopper registration is the manner in which services interact upon a successful response is obtained from the authentication handler service after the “create account” call.<!--]--></p><h3 id="login" data-v-4cf5bb93><a aria-current="page" href="/engineering/service-overview#login" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->Login<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->When a user logs in, they establish two sessions: one with the frontend which expires periodically, and another with the backend that can be used to refresh the app session. These are called the access token and refresh token, respectively.<!--]--></p><p data-v-9dc9c102><!--[-->During login, the backend works to ensure that users may not enumerate users in your system. This means it will not declare which field was incorrect , but instead fails with a generic credentials error. The below set of steps outline the process by which this logic flow is carried out.<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Through a form in the frontend, we collect user credentials and validate all fields<!--]--></li><li data-v-4c2f5fb9><!--[-->Send the information to the Api-Gateway
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Api-Gateway calls the authentication handler service via the “login” grpc endpoint which calls the authentication service to ensure it
withholds the record of interest
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->On failure, we return an error to the frontend immediately<!--]--></li><li data-v-4c2f5fb9><!--[-->On success, we obtain a JWT token and perform the following set of operations<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->We condition on account type and call a set of backend services to create a response that is
necessary for the ensuing UI page that follows successful logins
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->NOTE: Because we will be calling numerous services and schema stitch their responses, we are ok with partial failures. However, we must
ensure we provide the proper retry logic in place in cases of failure and emit the right set of metrics.<!--]--></li><li data-v-4c2f5fb9><!--[-->On failure of all calls, we should raise a sev 1 incident and return an error to the client<!--]--></li><li data-v-4c2f5fb9><!--[-->On success, we return the data to the frontend.<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Frontend obtains positive response from Api-Gateway and stores the JWT token in the browser cache which it can leverage on ensuing requests
by placing the token in the request header<!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><h3 id="logout" data-v-4cf5bb93><a aria-current="page" href="/engineering/service-overview#logout" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->Logout<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->Most of our users will probably disappear when they close the application, but sometimes they will want to cleanly log out. The backend will take care of cleaning up its sessions (the access token and refresh token). The below set of steps outline out log out flow.<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->The Api-Gateway is called with the current user’s account id when a user clicks the logout button.<!--]--></li><li data-v-4c2f5fb9><!--[-->Api-Gateway by use of the account ID calls the headless authentication service via the “logout” grpc endpoint which invoked the “logout” http
endpoint of the keratin-authn microservice.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->On success, the token within the session established with the backend for the account is revoked and the session is terminated.<!--]--></li><li data-v-4c2f5fb9><!--[-->On failure, we emit metrics, and continue to the next set of calls<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Api-Gateway call any other cleanup operations against the APIs of other microservices
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->NOTE: perform this via message queues. Asynchronous operation is useful in this scenario<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Api-Gateway returns a success response to the frontend<!--]--></li><li data-v-4c2f5fb9><!--[-->Frontend removes the JWT token from browser cache.<!--]--></li><!--]--></ul><h3 id="password-resetchange" data-v-4cf5bb93><a aria-current="page" href="/engineering/service-overview#password-resetchange" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->Password Reset/Change<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->The password registration process is a 2 phased endeavor. It requires the account owner to first request a password which will result in the account owner obtaining an email with a link to a password reset page where the password will be reset<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Through a form on the frontend, a user will provide their email field which will be validated prior to the Api-Gateway being invoked<!--]--></li><li data-v-4c2f5fb9><!--[-->Api-Gateway obtains the email field from the request body and call the headless authentication service via the “password reset” grpc endpoint
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Headless Authentication service invokes the “/password/reset” http endpoint of the authentication service.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Authentication service will post a webhook to the application password reset url with a request body containing the account ID and the
generated jwt token.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->NOTE: This webhook should be the url of the email service which would send an email containing the data to the user’s email and a
link to a custom password reset form. APP_PASSWORD_RESET_URL environment variable must be set<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Authentication service will return a response code which will tell the Api-Gateway whether an error occurred or not.<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Response code is used to send message to the frontend<!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><p data-v-9dc9c102><!--[-->In the second phase, once the user obtains the password reset email and clicks on the link forwarding him/her to the password reset form, we perform the following set of operations.<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Through the frontend, the user inputs his/her new password. Fields are validated and then a request is sent to the Api-Gateway. Prior to the
request being sent, the JWT token which was sent to the user’s email is attached to the request header<!--]--></li><li data-v-4c2f5fb9><!--[-->Api-Gateway calls the authentication handler service’s “password score” grpc endpoint first.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->On failure, re-prompt the user to input a stronger password<!--]--></li><li data-v-4c2f5fb9><!--[-->On success, perform the next set of operations<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Api-Gateway invokes “update account password” grpc endpoint which calls the authentication service via “/password” http endpoint with the new
password and the JWT token.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->On failure, return the error message to the client<!--]--></li><li data-v-4c2f5fb9><!--[-->On success, perform the next set of operations<!--]--></li><!--]--></ul><!--]--></li><li data-v-4c2f5fb9><!--[-->Api-Gateway calls and updates other dependent services that must be aware of the new password such as sending a confirmation email that the
password was successfully changed, … etc and returns the status of the prior operation to the frontend.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->NOTE: these set of service level interactions should ideally be performed via message queue.<!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><h3 id="record-update" data-v-4cf5bb93><a aria-current="page" href="/engineering/service-overview#record-update" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->Record Update<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->Account record modifications are expected and must occur in a fault-tolerant manner. The below set of steps outline the steps set in place in order to mitigate inconsistencies throughout the backend on operation failures especially since the state of the record present in the authentication service (keratin-authn) is the single source of truth.<!--]--></p><h4 id="operations" data-v-57e8d291><a aria-current="page" href="/engineering/service-overview#operations" class="router-link-active router-link-exact-active" data-v-57e8d291><!--[-->Operations<!--]--><!----></a></h4><p data-v-9dc9c102><!--[-->Any operation which updates the state of an account record (lock/unlock, update, archive,...etc) may fail and as a result we must ensure the proper limitations are set in place.<!--]--></p><p data-v-9dc9c102><!--[-->Whenever a record state update is attempted through the invocation of a respective grpc endpoint, the calling service must first perform the call and check the response. The following options are available to the caller depending on the status of the operation<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Failure
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->On failure (after numerous retries and internal server error), the calling service has 2 choices.
<ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Either the calling service fails the current overarching operation entirely<!--]--></li><li data-v-4c2f5fb9><!--[-->In cases when eventual consistency is acceptable, the calling service can place a message on the “update channel” of the message queue
which the authentication handler service is subscribed to and is to handle at some point later on.<!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><h2 id="sla-service-guarantees" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#sla-service-guarantees" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->SLA &amp; Service Guarantees<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->Fault tolerance and recovery requirements are defined above.<!--]--></p><h2 id="data-definition-schema-design-persistence-requirements" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#data-definition-schema-design-persistence-requirements" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Data Definition, Schema Design, Persistence Requirements<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->The data model is currently very simple. The authentication service (keratin-authn) only stores the following fields<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Record ID<!--]--></li><li data-v-4c2f5fb9><!--[-->Username/Email<!--]--></li><li data-v-4c2f5fb9><!--[-->Password<!--]--></li><li data-v-4c2f5fb9><!--[-->Locked (Tells whether the account is locked)<!--]--></li><li data-v-4c2f5fb9><!--[-->Deleted (Tells whether the account has been archived)<!--]--></li><!--]--></ul><h2 id="caching-requirements" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#caching-requirements" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Caching Requirements<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->Currently, there are no caching requirements as the headless authentication service is stateless and the authentication handler service only makes use of a key value store for session storage.<!--]--></p><h2 id="capacity-planning" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#capacity-planning" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Capacity Planning<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->Both services will generate logs, metrics, and traces. However, there isn’t an expectation that the service will generate an abnormal amount of data. We will leverage datadog as our metrics, log, and trace store. The retention policy will be 1 month.<!--]--></p><h2 id="performance-requirements" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#performance-requirements" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Performance Requirements<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->Authentication Handler Service &amp; Authentication Service (keratin-authn)<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Expected throughput: 50K QPS<!--]--></li><li data-v-4c2f5fb9><!--[-->Expected Latencies: &lt; 9ms<!--]--></li><!--]--></ul><p data-v-9dc9c102><!--[-->In order to ensure we have the utmost throughput and the minimal service level latencies, we following points must be enforced throughout development.
A gRPC channel must be reused when making gRPC calls since this allows calls to be multiplexed through an existing HTTP/2 connection. If a new channel is created for each gRPC call then we can have a significant latency overhead since each call will require multiple round trips between the client and the server to create the HTTP/2 connection:<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Opening a socket<!--]--></li><li data-v-4c2f5fb9><!--[-->Establishing TCP connection<!--]--></li><li data-v-4c2f5fb9><!--[-->Negotiating TLS<!--]--></li><li data-v-4c2f5fb9><!--[-->Starting HTTP/2 Connection<!--]--></li><li data-v-4c2f5fb9><!--[-->Making The gRPC call.<!--]--></li><!--]--></ul><p data-v-9dc9c102><!--[-->Channels on the contrary are safe to share and reuse between gRPC calls since gRPC clients are created with channels, are lightweight and don&#39;t require much caching. Multiple gRPC clients can be generated from a channel and such channels and clients can be used by multiple threads.<!--]--></p><p data-v-9dc9c102><!--[-->Please reference grpc performance best practices throughout development to optimize performance.<!--]--></p><h2 id="security" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#security" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Security<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->The authentication scheme makes use of emails which is considered personally identifiable information (PII/PCI). As a result, security is crucial. The proper origin headers must be set which is enforced by the keratin-authn service as well as communication via https. To further enhance security, all API traffic must be encrypted with TLS and SSL internally.<!--]--></p><p data-v-9dc9c102><!--[-->Please reference security best practices throughout development to better secure the backend system.<!--]--></p><p data-v-9dc9c102><!--[-->##Multi Region Story
As of yet, there are no regional special requirements for this service.<!--]--></p><h2 id="apigrpc-endpoints" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#apigrpc-endpoints" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->API/gRPC Endpoints<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->Please reference the grpc endpoint documentation throughout development.<!--]--></p><h2 id="rollout-plan" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#rollout-plan" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Rollout Plan<!--]--><!----></a></h2><h3 id="rollout-phases" data-v-4cf5bb93><a aria-current="page" href="/engineering/service-overview#rollout-phases" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->Rollout Phases<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->Rollout phases will be determined later.
A/B Tests
A/B Tests will be determined later.<!--]--></p><h3 id="data-migration" data-v-4cf5bb93><a aria-current="page" href="/engineering/service-overview#data-migration" class="router-link-active router-link-exact-active" data-v-4cf5bb93><!--[-->Data Migration<!--]--><!----></a></h3><p data-v-9dc9c102><!--[-->No data migration should occur however in the context of the authentication service, schema migrations should occur.<!--]--></p><h2 id="test-plan" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#test-plan" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Test Plan<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->Testing is crucial and will be prioritized throughout development. Unit tests will be of high importance. We mandata that each service has at least 85% unit test coverage. As for testing dependencies through integration and load tests, we will perform this in four phases.<!--]--></p><ul data-v-5bd61aad><!--[--><li data-v-4c2f5fb9><!--[-->Phase 1: mock dependency response &amp; test logic<!--]--></li><li data-v-4c2f5fb9><!--[-->Phase 2: spin up dependencies in docker containers &amp; perform gCurl against grpc endpoints &amp; ensure expected response is obtained<!--]--></li><li data-v-4c2f5fb9><!--[-->Phase 3: spin up dependencies in local &amp; sandboxed kubernetes cluster &amp; perform gCurl against grpc endpoints &amp; ensure expected response is obtained.<!--]--></li><li data-v-4c2f5fb9><!--[-->Phase 4: through use of vegeta load testing tool we will perform load tests against services running in kubernetes sandbox environment<!--]--></li><!--]--></ul><p data-v-9dc9c102><!--[-->The final stage of testing will apply chaos testing. We will enable certain environment variables which will fail some requests based on some preset probability. With this, we will perform load tests once again and ensure the proper set of metrics are emitted and the service is behaving as expected.<!--]--></p><p data-v-9dc9c102><!--[--><strong data-v-84b57b07><!--[-->NOTE<!--]--></strong>: it is important all these can be performed both locally and within our CI/CD workflow.<!--]--></p><h2 id="appendix" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#appendix" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Appendix<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->SSL &amp; TLS Examples<!--]--></p><h2 id="review-sign-off" data-v-70b0c1e2><a aria-current="page" href="/engineering/service-overview#review-sign-off" class="router-link-active router-link-exact-active" data-v-70b0c1e2><!--[-->Review Sign-Off<!--]--><!----></a></h2><p data-v-9dc9c102><!--[-->Team Lead/Manager - sign off by Srikar, Yoan Yomba
Sponsor - sign off by Yoan Yomba<!--]--></p></div><!--]--><!--]--><!--[--><div class="docs-page-bottom" data-v-73d798d2 data-v-346454d4><div class="edit-link" data-v-346454d4><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-346454d4 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="currentColor" d="M21 12a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1Zm-15 .76V17a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .71-.29l6.92-6.93L21.71 8a1 1 0 0 0 0-1.42l-4.24-4.29a1 1 0 0 0-1.42 0l-2.82 2.83l-6.94 6.93a1 1 0 0 0-.29.71Zm10.76-8.35l2.83 2.83l-1.42 1.42l-2.83-2.83ZM8 13.17l5.93-5.93l2.83 2.83L10.83 16H8Z"/></svg><!--[--><a href="https://github.com/nuxt-themes/docus/edit/main/.starters/default/content/3.engineering/service-overview.md" rel="noopener noreferrer" data-v-346454d4 data-v-692834dd><!--[--><span data-v-346454d4> Edit this page on GitHub </span><!--]--></a><!--]--></div><!----></div><div class="docs-prev-next" data-v-73d798d2 data-v-30e1aea1><a href="/engineering/helm-chart-definition" class="prev" data-v-30e1aea1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-30e1aea1 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m11 17l-5-5m0 0l5-5m-5 5h12"/></svg><div class="wrapper" data-v-30e1aea1><span class="directory" data-v-30e1aea1>Engineering</span><span class="title" data-v-30e1aea1>headless-authentication-service</span></div></a><a href="/engineering/service" class="next" data-v-30e1aea1><div class="wrapper" data-v-30e1aea1><span class="directory" data-v-30e1aea1>Engineering</span><span class="title" data-v-30e1aea1>Protocol Documentation</span></div><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-30e1aea1 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m13 7l5 5m0 0l-5 5m5-5H6"/></svg></a></div><!--]--></article><div class="toc" data-v-73d798d2><div class="toc-wrapper" data-v-73d798d2><button data-v-73d798d2><span class="title" data-v-73d798d2>Table of Contents</span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-73d798d2 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 5l7 7l-7 7"/></svg></button><div class="docs-toc-wrapper" data-v-73d798d2><div class="docs-toc" data-v-73d798d2 data-v-ebd2b6b2><!--[--><div class="docs-toc-title" data-v-ebd2b6b2><span data-v-ebd2b6b2>Table of Contents</span></div><ul class="docs-toc-links" data-v-ebd2b6b2 data-v-a97df893><!--[--><li class="depth-2" data-v-a97df893><a href="#introduction" class="" data-v-a97df893>Introduction</a><!----></li><li class="depth-2" data-v-a97df893><a href="#motivation" class="" data-v-a97df893>Motivation</a><!----></li><li class="depth-2" data-v-a97df893><a href="#potential-solutions" class="" data-v-a97df893>Potential Solutions</a><ul class="docs-toc-links" data-v-a97df893 data-v-a97df893><!--[--><li class="depth-3" data-v-a97df893><a href="#experimental-implement-after-mvp-launch" class="" data-v-a97df893>(EXPERIMENTAL : Implement After MVP Launch)</a><!----></li><!--]--></ul></li><li class="depth-2" data-v-a97df893><a href="#assumptions" class="" data-v-a97df893>Assumptions</a><!----></li><li class="depth-2" data-v-a97df893><a href="#constraintslimitations" class="" data-v-a97df893>Constraints/Limitations</a><!----></li><li class="depth-2" data-v-a97df893><a href="#hard-soft-requirements" class="" data-v-a97df893>Hard &amp; Soft Requirements</a><!----></li><li class="depth-2" data-v-a97df893><a href="#algorithm-pseudocode-for-main-components" class="" data-v-a97df893>Algorithm &amp; Pseudocode For Main Components</a><ul class="docs-toc-links" data-v-a97df893 data-v-a97df893><!--[--><li class="depth-3" data-v-a97df893><a href="#authentication" class="" data-v-a97df893>Authentication</a><!----></li><li class="depth-3" data-v-a97df893><a href="#registration" class="" data-v-a97df893>Registration</a><!----></li><li class="depth-3" data-v-a97df893><a href="#login" class="" data-v-a97df893>Login</a><!----></li><li class="depth-3" data-v-a97df893><a href="#logout" class="" data-v-a97df893>Logout</a><!----></li><li class="depth-3" data-v-a97df893><a href="#password-resetchange" class="" data-v-a97df893>Password Reset/Change</a><!----></li><li class="depth-3" data-v-a97df893><a href="#record-update" class="" data-v-a97df893>Record Update</a><!----></li><!--]--></ul></li><li class="depth-2" data-v-a97df893><a href="#sla-service-guarantees" class="" data-v-a97df893>SLA &amp; Service Guarantees</a><!----></li><li class="depth-2" data-v-a97df893><a href="#data-definition-schema-design-persistence-requirements" class="" data-v-a97df893>Data Definition, Schema Design, Persistence Requirements</a><!----></li><li class="depth-2" data-v-a97df893><a href="#caching-requirements" class="" data-v-a97df893>Caching Requirements</a><!----></li><li class="depth-2" data-v-a97df893><a href="#capacity-planning" class="" data-v-a97df893>Capacity Planning</a><!----></li><li class="depth-2" data-v-a97df893><a href="#performance-requirements" class="" data-v-a97df893>Performance Requirements</a><!----></li><li class="depth-2" data-v-a97df893><a href="#security" class="" data-v-a97df893>Security</a><!----></li><li class="depth-2" data-v-a97df893><a href="#apigrpc-endpoints" class="" data-v-a97df893>API/gRPC Endpoints</a><!----></li><li class="depth-2" data-v-a97df893><a href="#rollout-plan" class="" data-v-a97df893>Rollout Plan</a><ul class="docs-toc-links" data-v-a97df893 data-v-a97df893><!--[--><li class="depth-3" data-v-a97df893><a href="#rollout-phases" class="" data-v-a97df893>Rollout Phases</a><!----></li><li class="depth-3" data-v-a97df893><a href="#data-migration" class="" data-v-a97df893>Data Migration</a><!----></li><!--]--></ul></li><li class="depth-2" data-v-a97df893><a href="#test-plan" class="" data-v-a97df893>Test Plan</a><!----></li><li class="depth-2" data-v-a97df893><a href="#appendix" class="" data-v-a97df893>Appendix</a><!----></li><li class="depth-2" data-v-a97df893><a href="#review-sign-off" class="" data-v-a97df893>Review Sign-Off</a><!----></li><!--]--></ul><!--]--></div></div></div></div><!--]--></div></div><!--]--></main><footer data-v-5c2f7786 data-v-39bdaab3><div class="container pv-mgkXWJ pc-EmeDcd footer-container" data-v-39bdaab3 data-v-a8d7e2a7><!--[--><div class="left" data-v-39bdaab3><a href="https://docus.dev" rel="noopener" target="_blank" data-v-39bdaab3><svg viewbox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon left-icon" width="1em" height="1em" data-v-39bdaab3 data-v-e610b8e3><path fill-rule="evenodd" clip-rule="evenodd" d="M28.5445 0C12.8044 0 0 12.7599 0 28.5v25.4549c0 1.5835 1.28368 2.8672 2.86718 2.8672H28.5889C44.2799 56.8221 57 44.102 57 28.4111 57 12.7201 44.2355 0 28.5445 0Zm15.4963 34.452c3.3649 0 6.0927-2.7278 6.0927-6.0928 0-3.3649-2.7278-6.0927-6.0927-6.0927-3.365 0-6.0928 2.7278-6.0928 6.0927 0 3.365 2.7278 6.0928 6.0928 6.0928Zm-18.0833.0003c3.3649 0 6.0927-2.7278 6.0927-6.0927s-2.7278-6.0928-6.0927-6.0928-6.0928 2.7279-6.0928 6.0928c0 3.3649 2.7279 6.0927 6.0928 6.0927Z" fill="currentColor"></path></svg><p data-v-39bdaab3>Powered by Docus</p></a></div><div class="center" data-v-39bdaab3><!--[--><!--]--></div><div class="right" data-v-39bdaab3><!--[--><!--]--><!--[--><a href="https://twitter.com/nuxt_js" rel="noopener noreferrer" target="_blank" title="nuxt_js" aria-label="nuxt_js" data-v-22569e45><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-22569e45 style="" width="1em" height="1em" viewBox="0 0 512 512" data-v-e610b8e3><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645c0 138.72-105.583 298.558-298.558 298.558c-59.452 0-114.68-17.219-161.137-47.106c8.447.974 16.568 1.299 25.34 1.299c49.055 0 94.213-16.568 130.274-44.832c-46.132-.975-84.792-31.188-98.112-72.772c6.498.974 12.995 1.624 19.818 1.624c9.421 0 18.843-1.3 27.614-3.573c-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319c-28.264-18.843-46.781-51.005-46.781-87.391c0-19.492 5.197-37.36 14.294-52.954c51.655 63.675 129.3 105.258 216.365 109.807c-1.624-7.797-2.599-15.918-2.599-24.04c0-57.828 46.782-104.934 104.934-104.934c30.213 0 57.502 12.67 76.67 33.137c23.715-4.548 46.456-13.32 66.599-25.34c-7.798 24.366-24.366 44.833-46.132 57.827c21.117-2.273 41.584-8.122 60.426-16.243c-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a><a href="https://github.com/nuxt-themes/docus" rel="noopener noreferrer" target="_blank" title="nuxt-themes/docus" aria-label="nuxt-themes/docus" data-v-22569e45><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-22569e45 style="" width="1em" height="1em" viewBox="0 0 496 512" data-v-e610b8e3><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2c1.6 1.6 3.9 2.3 5.2 1c1.3-1 1-3.3-.7-5.2c-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9c1.6 1 3.6.7 4.3-.7c.7-1.3-.3-2.9-2.3-3.9c-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2c2.3 2.3 5.2 2.6 6.5 1c1.3-1.3.7-4.3-1.3-6.2c-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9c1.6 2.3 4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2c-1.4-2.3-4-3.3-5.6-2z"/></svg></a><a href="https://nuxt.com" rel="noopener noreferrer" target="_blank" title="Nuxt" aria-label="Nuxt" data-v-22569e45><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-22569e45 style="" width="1em" height="1em" viewBox="0 0 24 24" data-v-e610b8e3><path fill="currentColor" d="M13.464 19.83h8.922c.283 0 .562-.073.807-.21a1.59 1.59 0 0 0 .591-.574a1.53 1.53 0 0 0 .216-.783a1.529 1.529 0 0 0-.217-.782L17.792 7.414a1.59 1.59 0 0 0-.591-.573a1.652 1.652 0 0 0-.807-.21c-.283 0-.562.073-.807.21a1.59 1.59 0 0 0-.59.573L13.463 9.99L10.47 4.953a1.591 1.591 0 0 0-.591-.573a1.653 1.653 0 0 0-.807-.21c-.284 0-.562.073-.807.21a1.591 1.591 0 0 0-.591.573L.216 17.481a1.53 1.53 0 0 0-.217.782c0 .275.074.545.216.783a1.59 1.59 0 0 0 .59.574c.246.137.525.21.808.21h5.6c2.22 0 3.856-.946 4.982-2.79l2.733-4.593l1.464-2.457l4.395 7.382h-5.859Zm-6.341-2.46l-3.908-.002l5.858-9.842l2.923 4.921l-1.957 3.29c-.748 1.196-1.597 1.632-2.916 1.632z"/></svg></a><!--]--></div><!--]--></div></footer></div></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true" data-src="/engineering/service-overview/_payload.json">[{"state":1,"_errors":1084,"serverRendered":1007,"path":7,"prerenderedAt":1087},["Reactive",2],{"$sdd-pages":3,"$sdd-surrounds":988,"$sdd-globals":1003,"$scolor-mode":1005,"$sdd-navigation":1008,"$sicons":1049,"$sasideScroll":1079,"$sdocus-docs-aside-collapse-map-/":1080,"$sdocus-docs-aside-collapse-map-/introduction":1081,"$sdocus-docs-aside-collapse-map-/api":1082,"$sdocus-docs-aside-collapse-map-/engineering":1083},["ShallowRef",4],["ShallowReactive",5],{"/engineering/service-overview":6},{"_path":7,"_dir":8,"_draft":9,"_partial":9,"_locale":10,"title":11,"description":12,"body":13,"_type":982,"_id":983,"_source":984,"_file":985,"_extension":986,"layout":987},"/engineering/service-overview","engineering",false,"","Service Overview","Simifinii: Authentication Microservice Design Document",{"type":14,"children":15,"toc":948},"root",[16,27,37,47,57,67,84,97,104,109,115,120,125,130,136,141,146,151,158,163,169,174,180,185,199,211,223,229,234,239,244,249,255,261,266,272,277,359,364,370,375,380,442,448,453,502,508,513,560,565,621,627,632,639,644,649,678,684,689,695,700,728,734,739,745,750,756,761,774,779,807,812,817,823,828,833,838,844,849,855,861,866,872,877,883,888,911,916,926,932,937,943],{"type":17,"tag":18,"props":19,"children":20},"element","p",{},[21],{"type":17,"tag":22,"props":23,"children":24},"strong",{},[25],{"type":26,"value":12},"text",{"type":17,"tag":18,"props":28,"children":29},{},[30,35],{"type":17,"tag":22,"props":31,"children":32},{},[33],{"type":26,"value":34},"Date",{"type":26,"value":36},": 2021-11-05",{"type":17,"tag":18,"props":38,"children":39},{},[40,45],{"type":17,"tag":22,"props":41,"children":42},{},[43],{"type":26,"value":44},"Project",{"type":26,"value":46},": Simifinii: Authentication Microservice",{"type":17,"tag":18,"props":48,"children":49},{},[50,55],{"type":17,"tag":22,"props":51,"children":52},{},[53],{"type":26,"value":54},"Audience",{"type":26,"value":56},": Engineering",{"type":17,"tag":18,"props":58,"children":59},{},[60,65],{"type":17,"tag":22,"props":61,"children":62},{},[63],{"type":26,"value":64},"Authors",{"type":26,"value":66},": Srikar, Yoan Yomba",{"type":17,"tag":18,"props":68,"children":69},{},[70,75,77],{"type":17,"tag":22,"props":71,"children":72},{},[73],{"type":26,"value":74},"Emails",{"type":26,"value":76},": ",{"type":17,"tag":78,"props":79,"children":81},"a",{"href":80},"mailto:yoanyombapro@gmail.com",[82],{"type":26,"value":83},"yoanyombapro@gmail.com",{"type":17,"tag":18,"props":85,"children":86},{},[87,92,93],{"type":17,"tag":22,"props":88,"children":89},{},[90],{"type":26,"value":91},"Reply To",{"type":26,"value":76},{"type":17,"tag":78,"props":94,"children":95},{"href":80},[96],{"type":26,"value":83},{"type":17,"tag":98,"props":99,"children":101},"h2",{"id":100},"introduction",[102],{"type":26,"value":103},"Introduction",{"type":17,"tag":18,"props":105,"children":106},{},[107],{"type":26,"value":108},"The primary goal of this service is to serve as the primary means of authentication within the backend system.",{"type":17,"tag":98,"props":110,"children":112},{"id":111},"motivation",[113],{"type":26,"value":114},"Motivation",{"type":17,"tag":18,"props":116,"children":117},{},[118],{"type":26,"value":119},"Authentication is an extremely important aspect of an any platform due in part to the fact that data protection at the user level must be enforced as well as access level permissions. Authentication however, in a distributed system provides more complexities. In monolithic applications, authentication and authorization can be performed via sessions. However, in a distributed system, since multiple instances of a service can be deployed at one time, enforcing user requests to the originating session instance (sticky sessions) isn’t viable and introduces a ton of operational overhead.",{"type":17,"tag":18,"props":121,"children":122},{},[123],{"type":26,"value":124},"With this in mind, we at the simifinii aim to implement our authorization scheme via 2 sets of services via json web tokens (JWT). We also make use of a distributed cache for session storage which ensures that we don’t need to maintain stickiness across instances of a server. The authentication framework developed by us consists of 2 service instances. One is a stateful instance which utilizes the open-sourced keratin-authn microservice and interfaces with either a postgres or mysql database.The second instance is a headless authentication service which is stateless and serves as an interface through which the keratin-authn service can be interacted with.",{"type":17,"tag":18,"props":126,"children":127},{},[128],{"type":26,"value":129},"The rest of this design document provides further details pertinent to this implementation.",{"type":17,"tag":98,"props":131,"children":133},{"id":132},"potential-solutions",[134],{"type":26,"value":135},"Potential Solutions",{"type":17,"tag":18,"props":137,"children":138},{},[139],{"type":26,"value":140},"Proposed above is a solution that utilizes 2 sets of services. One which serves as a stateless headless service and interacts with the keratin authn stateful service via APIs. The reason for this design decision is to first abstract the private and public api’s keratin authn exposes from the context of other consuming services. Without this, all calling services would have to be aware of public and private endpoints as well as properly set headers. Through the headless authentication service, these can automatically be set in requests prior to transit.",{"type":17,"tag":18,"props":142,"children":143},{},[144],{"type":26,"value":145},"The reason we picked the open sourced keratin authn service was partly due to the fact that we needed the service to completely own all account credential data completely removing this necessity from other microservices. Additionally we loved its reliance on SQL databases for long term account/credentials data, and its ease of integration into our backend system.",{"type":17,"tag":18,"props":147,"children":148},{},[149],{"type":26,"value":150},"In summary, the API that the authentication handler service provides and its ability to interface with keratin-authn eases the operational overhead all consuming services must absorb.",{"type":17,"tag":152,"props":153,"children":155},"h3",{"id":154},"experimental-implement-after-mvp-launch",[156],{"type":26,"value":157},"(EXPERIMENTAL : Implement After MVP Launch)",{"type":17,"tag":18,"props":159,"children":160},{},[161],{"type":26,"value":162},"It is important to note one very important point. The headless authentication service withholds a go-routine which continuously polls the message queue’s “record update” channel. The messages in such queues follow the following rubric. They must contain the name of the respective grpc api and the required request field parameters. The go-routine routinely polls the message queue, performs the operation defined by the message via a set of retries and on failures (internal server error) … puts the message back onto the queue.",{"type":17,"tag":98,"props":164,"children":166},{"id":165},"assumptions",[167],{"type":26,"value":168},"Assumptions",{"type":17,"tag":18,"props":170,"children":171},{},[172],{"type":26,"value":173},"No assumptions are currently present. However, this section is prone to change especially as the service level requirements change.",{"type":17,"tag":98,"props":175,"children":177},{"id":176},"constraintslimitations",[178],{"type":26,"value":179},"Constraints/Limitations",{"type":17,"tag":18,"props":181,"children":182},{},[183],{"type":26,"value":184},"These sets of services are only meant to provide an authentication mechanism and retain a single source of truth of the state of an account throughout the backend system. Account state updates must propagate to this service via distributed transactions. Consistency holds the highest priority when dealing with account record state within the system.\nSystem Design/Architecture\nSystem Diagram & Flowchart",{"type":17,"tag":18,"props":186,"children":187},{},[188,194],{"type":17,"tag":189,"props":190,"children":193},"img",{"alt":191,"src":192},"image info","./images/auth_hdlr_svc.png",[],{"type":17,"tag":22,"props":195,"children":196},{},[197],{"type":26,"value":198},"Figure 1: Authentication Handler Service",{"type":17,"tag":18,"props":200,"children":201},{},[202,206],{"type":17,"tag":189,"props":203,"children":205},{"alt":191,"src":204},"./images/auth_svc.png",[],{"type":17,"tag":22,"props":207,"children":208},{},[209],{"type":26,"value":210},"Figure 2: Authentication Service (Keratin Authn)",{"type":17,"tag":18,"props":212,"children":213},{},[214,218],{"type":17,"tag":189,"props":215,"children":217},{"alt":191,"src":216},"./images/svc_level_interactions.png",[],{"type":17,"tag":22,"props":219,"children":220},{},[221],{"type":26,"value":222},"Figure 3: Service Level Interactions",{"type":17,"tag":98,"props":224,"children":226},{"id":225},"hard-soft-requirements",[227],{"type":26,"value":228},"Hard & Soft Requirements",{"type":17,"tag":18,"props":230,"children":231},{},[232],{"type":26,"value":233},"This is a crucial part of the system. As a result, if either instance goes down, users will inherently be unable to sign into the system, create new accounts, and account records could be in an inconsistent state across the backend. In summary, this would cause an outage.",{"type":17,"tag":18,"props":235,"children":236},{},[237],{"type":26,"value":238},"Since consistency is key to ensuring the system behaves as expected, we must build in resiliency through asynchronous messaging in hopes of enabling failed requests to eventually be processed (eventual consistency). This concept of eventual consistency if truly only relevant for failed requests attempting to modify account record states. In cases of failed sign up/sign in requests due to service unavailability, we must provide the proper alert logic (sev 1 … etc) so that the on-call can fix the problem at hand.",{"type":17,"tag":18,"props":240,"children":241},{},[242],{"type":26,"value":243},"It is important to note that we prioritize data consistency across the backend since lack thereof can have serious implications. Lack of access to the system as a result of complete failure for us although ill-advised can be rectified assuming the on-call tends to the failure in a timely manner. This however entails that granular logs are emitted, the proper set of metrics are defined, critical logic paths are instrumented, and proper monitoring is set in place.",{"type":17,"tag":18,"props":245,"children":246},{},[247],{"type":26,"value":248},"Remember, there is no such thing as “over instrumentation”.",{"type":17,"tag":98,"props":250,"children":252},{"id":251},"algorithm-pseudocode-for-main-components",[253],{"type":26,"value":254},"Algorithm & Pseudocode For Main Components",{"type":17,"tag":152,"props":256,"children":258},{"id":257},"authentication",[259],{"type":26,"value":260},"Authentication",{"type":17,"tag":18,"props":262,"children":263},{},[264],{"type":26,"value":265},"The authentication scheme makes use of JWT tokens for authentication. In order for a user to be properly authenticated, he/she must first create an account then go through the account sign up flow. From the context of the frontend, the registration flow varies across user types. However, in the context of the backend, all accounts have similar registration flow and exact sign up flow.",{"type":17,"tag":152,"props":267,"children":269},{"id":268},"registration",[270],{"type":26,"value":271},"Registration",{"type":17,"tag":18,"props":273,"children":274},{},[275],{"type":26,"value":276},"Registration is a multi-step process that begins at the client and involves a multitude of services. The below step outline this process",{"type":17,"tag":278,"props":279,"children":280},"ul",{},[281,287],{"type":17,"tag":282,"props":283,"children":284},"li",{},[285],{"type":26,"value":286},"Through a form on the frontend, we collect a user’s credentials and other required pieces of data & perform field validation",{"type":17,"tag":282,"props":288,"children":289},{},[290,292],{"type":26,"value":291},"Send the request to the Api-Gateway\n",{"type":17,"tag":278,"props":293,"children":294},{},[295,313,336,354],{"type":17,"tag":282,"props":296,"children":297},{},[298,300],{"type":26,"value":299},"Api-Gateway obtains from the request object the email and password fields and performs a series of calls to the headless authentication\nservice. The first endpoint called is the “password score” to ensure the request password is strong enough.\n",{"type":17,"tag":278,"props":301,"children":302},{},[303,308],{"type":17,"tag":282,"props":304,"children":305},{},[306],{"type":26,"value":307},"On failure, we return an error to the client stating the provided password is too weak.",{"type":17,"tag":282,"props":309,"children":310},{},[311],{"type":26,"value":312},"On success, we proceed to the next call",{"type":17,"tag":282,"props":314,"children":315},{},[316,318],{"type":26,"value":317},"Api-Gateway invokes the “create account” api of the authentication handler service.\n",{"type":17,"tag":278,"props":319,"children":320},{},[321,326,331],{"type":17,"tag":282,"props":322,"children":323},{},[324],{"type":26,"value":325},"Headless Authentication service performs a create account call via the authentication service and returns the id of the created account to\nthe Api-Gateway.",{"type":17,"tag":282,"props":327,"children":328},{},[329],{"type":26,"value":330},"On failure, we return an error to the client stating that the provided credentials are invalid or there is an outage.",{"type":17,"tag":282,"props":332,"children":333},{},[334],{"type":26,"value":335},"On success, we perform the next set of operations",{"type":17,"tag":282,"props":337,"children":338},{},[339,341],{"type":26,"value":340},"With the returned ID, the Api-Gateway calls a set of backend services explicitly or through msg queues to create records from their context\nand any additional operation such as sending out email, … etc.\n",{"type":17,"tag":278,"props":342,"children":343},{},[344,349],{"type":17,"tag":282,"props":345,"children":346},{},[347],{"type":26,"value":348},"If this fails, the gateway needs to be smart about retrying this operation. ensuring fields are properly validated before the request is\nsent from the frontend to the gateway can limit this from happening.",{"type":17,"tag":282,"props":350,"children":351},{},[352],{"type":26,"value":353},"NOTE: these set of operations should be performed asynchronously via messages and a queue",{"type":17,"tag":282,"props":355,"children":356},{},[357],{"type":26,"value":358},"Upon successful creation of the account, we send the successful response to the frontend",{"type":17,"tag":18,"props":360,"children":361},{},[362],{"type":26,"value":363},"The only difference between the set of service level interactions in the backend between merchant and shopper registration is the manner in which services interact upon a successful response is obtained from the authentication handler service after the “create account” call.",{"type":17,"tag":152,"props":365,"children":367},{"id":366},"login",[368],{"type":26,"value":369},"Login",{"type":17,"tag":18,"props":371,"children":372},{},[373],{"type":26,"value":374},"When a user logs in, they establish two sessions: one with the frontend which expires periodically, and another with the backend that can be used to refresh the app session. These are called the access token and refresh token, respectively.",{"type":17,"tag":18,"props":376,"children":377},{},[378],{"type":26,"value":379},"During login, the backend works to ensure that users may not enumerate users in your system. This means it will not declare which field was incorrect , but instead fails with a generic credentials error. The below set of steps outline the process by which this logic flow is carried out.",{"type":17,"tag":278,"props":381,"children":382},{},[383,388],{"type":17,"tag":282,"props":384,"children":385},{},[386],{"type":26,"value":387},"Through a form in the frontend, we collect user credentials and validate all fields",{"type":17,"tag":282,"props":389,"children":390},{},[391,393],{"type":26,"value":392},"Send the information to the Api-Gateway\n",{"type":17,"tag":278,"props":394,"children":395},{},[396,414,437],{"type":17,"tag":282,"props":397,"children":398},{},[399,401],{"type":26,"value":400},"Api-Gateway calls the authentication handler service via the “login” grpc endpoint which calls the authentication service to ensure it\nwithholds the record of interest\n",{"type":17,"tag":278,"props":402,"children":403},{},[404,409],{"type":17,"tag":282,"props":405,"children":406},{},[407],{"type":26,"value":408},"On failure, we return an error to the frontend immediately",{"type":17,"tag":282,"props":410,"children":411},{},[412],{"type":26,"value":413},"On success, we obtain a JWT token and perform the following set of operations",{"type":17,"tag":282,"props":415,"children":416},{},[417,419],{"type":26,"value":418},"We condition on account type and call a set of backend services to create a response that is\nnecessary for the ensuing UI page that follows successful logins\n",{"type":17,"tag":278,"props":420,"children":421},{},[422,427,432],{"type":17,"tag":282,"props":423,"children":424},{},[425],{"type":26,"value":426},"NOTE: Because we will be calling numerous services and schema stitch their responses, we are ok with partial failures. However, we must\nensure we provide the proper retry logic in place in cases of failure and emit the right set of metrics.",{"type":17,"tag":282,"props":428,"children":429},{},[430],{"type":26,"value":431},"On failure of all calls, we should raise a sev 1 incident and return an error to the client",{"type":17,"tag":282,"props":433,"children":434},{},[435],{"type":26,"value":436},"On success, we return the data to the frontend.",{"type":17,"tag":282,"props":438,"children":439},{},[440],{"type":26,"value":441},"Frontend obtains positive response from Api-Gateway and stores the JWT token in the browser cache which it can leverage on ensuing requests\nby placing the token in the request header",{"type":17,"tag":152,"props":443,"children":445},{"id":444},"logout",[446],{"type":26,"value":447},"Logout",{"type":17,"tag":18,"props":449,"children":450},{},[451],{"type":26,"value":452},"Most of our users will probably disappear when they close the application, but sometimes they will want to cleanly log out. The backend will take care of cleaning up its sessions (the access token and refresh token). The below set of steps outline out log out flow.",{"type":17,"tag":278,"props":454,"children":455},{},[456,461,479,492,497],{"type":17,"tag":282,"props":457,"children":458},{},[459],{"type":26,"value":460},"The Api-Gateway is called with the current user’s account id when a user clicks the logout button.",{"type":17,"tag":282,"props":462,"children":463},{},[464,466],{"type":26,"value":465},"Api-Gateway by use of the account ID calls the headless authentication service via the “logout” grpc endpoint which invoked the “logout” http\nendpoint of the keratin-authn microservice.\n",{"type":17,"tag":278,"props":467,"children":468},{},[469,474],{"type":17,"tag":282,"props":470,"children":471},{},[472],{"type":26,"value":473},"On success, the token within the session established with the backend for the account is revoked and the session is terminated.",{"type":17,"tag":282,"props":475,"children":476},{},[477],{"type":26,"value":478},"On failure, we emit metrics, and continue to the next set of calls",{"type":17,"tag":282,"props":480,"children":481},{},[482,484],{"type":26,"value":483},"Api-Gateway call any other cleanup operations against the APIs of other microservices\n",{"type":17,"tag":278,"props":485,"children":486},{},[487],{"type":17,"tag":282,"props":488,"children":489},{},[490],{"type":26,"value":491},"NOTE: perform this via message queues. Asynchronous operation is useful in this scenario",{"type":17,"tag":282,"props":493,"children":494},{},[495],{"type":26,"value":496},"Api-Gateway returns a success response to the frontend",{"type":17,"tag":282,"props":498,"children":499},{},[500],{"type":26,"value":501},"Frontend removes the JWT token from browser cache.",{"type":17,"tag":152,"props":503,"children":505},{"id":504},"password-resetchange",[506],{"type":26,"value":507},"Password Reset/Change",{"type":17,"tag":18,"props":509,"children":510},{},[511],{"type":26,"value":512},"The password registration process is a 2 phased endeavor. It requires the account owner to first request a password which will result in the account owner obtaining an email with a link to a password reset page where the password will be reset",{"type":17,"tag":278,"props":514,"children":515},{},[516,521],{"type":17,"tag":282,"props":517,"children":518},{},[519],{"type":26,"value":520},"Through a form on the frontend, a user will provide their email field which will be validated prior to the Api-Gateway being invoked",{"type":17,"tag":282,"props":522,"children":523},{},[524,526],{"type":26,"value":525},"Api-Gateway obtains the email field from the request body and call the headless authentication service via the “password reset” grpc endpoint\n",{"type":17,"tag":278,"props":527,"children":528},{},[529,555],{"type":17,"tag":282,"props":530,"children":531},{},[532,534],{"type":26,"value":533},"Headless Authentication service invokes the “/password/reset” http endpoint of the authentication service.\n",{"type":17,"tag":278,"props":535,"children":536},{},[537,550],{"type":17,"tag":282,"props":538,"children":539},{},[540,542],{"type":26,"value":541},"Authentication service will post a webhook to the application password reset url with a request body containing the account ID and the\ngenerated jwt token.\n",{"type":17,"tag":278,"props":543,"children":544},{},[545],{"type":17,"tag":282,"props":546,"children":547},{},[548],{"type":26,"value":549},"NOTE: This webhook should be the url of the email service which would send an email containing the data to the user’s email and a\nlink to a custom password reset form. APP_PASSWORD_RESET_URL environment variable must be set",{"type":17,"tag":282,"props":551,"children":552},{},[553],{"type":26,"value":554},"Authentication service will return a response code which will tell the Api-Gateway whether an error occurred or not.",{"type":17,"tag":282,"props":556,"children":557},{},[558],{"type":26,"value":559},"Response code is used to send message to the frontend",{"type":17,"tag":18,"props":561,"children":562},{},[563],{"type":26,"value":564},"In the second phase, once the user obtains the password reset email and clicks on the link forwarding him/her to the password reset form, we perform the following set of operations.",{"type":17,"tag":278,"props":566,"children":567},{},[568,573,591,608],{"type":17,"tag":282,"props":569,"children":570},{},[571],{"type":26,"value":572},"Through the frontend, the user inputs his/her new password. Fields are validated and then a request is sent to the Api-Gateway. Prior to the\nrequest being sent, the JWT token which was sent to the user’s email is attached to the request header",{"type":17,"tag":282,"props":574,"children":575},{},[576,578],{"type":26,"value":577},"Api-Gateway calls the authentication handler service’s “password score” grpc endpoint first.\n",{"type":17,"tag":278,"props":579,"children":580},{},[581,586],{"type":17,"tag":282,"props":582,"children":583},{},[584],{"type":26,"value":585},"On failure, re-prompt the user to input a stronger password",{"type":17,"tag":282,"props":587,"children":588},{},[589],{"type":26,"value":590},"On success, perform the next set of operations",{"type":17,"tag":282,"props":592,"children":593},{},[594,596],{"type":26,"value":595},"Api-Gateway invokes “update account password” grpc endpoint which calls the authentication service via “/password” http endpoint with the new\npassword and the JWT token.\n",{"type":17,"tag":278,"props":597,"children":598},{},[599,604],{"type":17,"tag":282,"props":600,"children":601},{},[602],{"type":26,"value":603},"On failure, return the error message to the client",{"type":17,"tag":282,"props":605,"children":606},{},[607],{"type":26,"value":590},{"type":17,"tag":282,"props":609,"children":610},{},[611,613],{"type":26,"value":612},"Api-Gateway calls and updates other dependent services that must be aware of the new password such as sending a confirmation email that the\npassword was successfully changed, … etc and returns the status of the prior operation to the frontend.\n",{"type":17,"tag":278,"props":614,"children":615},{},[616],{"type":17,"tag":282,"props":617,"children":618},{},[619],{"type":26,"value":620},"NOTE: these set of service level interactions should ideally be performed via message queue.",{"type":17,"tag":152,"props":622,"children":624},{"id":623},"record-update",[625],{"type":26,"value":626},"Record Update",{"type":17,"tag":18,"props":628,"children":629},{},[630],{"type":26,"value":631},"Account record modifications are expected and must occur in a fault-tolerant manner. The below set of steps outline the steps set in place in order to mitigate inconsistencies throughout the backend on operation failures especially since the state of the record present in the authentication service (keratin-authn) is the single source of truth.",{"type":17,"tag":633,"props":634,"children":636},"h4",{"id":635},"operations",[637],{"type":26,"value":638},"Operations",{"type":17,"tag":18,"props":640,"children":641},{},[642],{"type":26,"value":643},"Any operation which updates the state of an account record (lock/unlock, update, archive,...etc) may fail and as a result we must ensure the proper limitations are set in place.",{"type":17,"tag":18,"props":645,"children":646},{},[647],{"type":26,"value":648},"Whenever a record state update is attempted through the invocation of a respective grpc endpoint, the calling service must first perform the call and check the response. The following options are available to the caller depending on the status of the operation",{"type":17,"tag":278,"props":650,"children":651},{},[652],{"type":17,"tag":282,"props":653,"children":654},{},[655,657],{"type":26,"value":656},"Failure\n",{"type":17,"tag":278,"props":658,"children":659},{},[660],{"type":17,"tag":282,"props":661,"children":662},{},[663,665],{"type":26,"value":664},"On failure (after numerous retries and internal server error), the calling service has 2 choices.\n",{"type":17,"tag":278,"props":666,"children":667},{},[668,673],{"type":17,"tag":282,"props":669,"children":670},{},[671],{"type":26,"value":672},"Either the calling service fails the current overarching operation entirely",{"type":17,"tag":282,"props":674,"children":675},{},[676],{"type":26,"value":677},"In cases when eventual consistency is acceptable, the calling service can place a message on the “update channel” of the message queue\nwhich the authentication handler service is subscribed to and is to handle at some point later on.",{"type":17,"tag":98,"props":679,"children":681},{"id":680},"sla-service-guarantees",[682],{"type":26,"value":683},"SLA & Service Guarantees",{"type":17,"tag":18,"props":685,"children":686},{},[687],{"type":26,"value":688},"Fault tolerance and recovery requirements are defined above.",{"type":17,"tag":98,"props":690,"children":692},{"id":691},"data-definition-schema-design-persistence-requirements",[693],{"type":26,"value":694},"Data Definition, Schema Design, Persistence Requirements",{"type":17,"tag":18,"props":696,"children":697},{},[698],{"type":26,"value":699},"The data model is currently very simple. The authentication service (keratin-authn) only stores the following fields",{"type":17,"tag":278,"props":701,"children":702},{},[703,708,713,718,723],{"type":17,"tag":282,"props":704,"children":705},{},[706],{"type":26,"value":707},"Record ID",{"type":17,"tag":282,"props":709,"children":710},{},[711],{"type":26,"value":712},"Username/Email",{"type":17,"tag":282,"props":714,"children":715},{},[716],{"type":26,"value":717},"Password",{"type":17,"tag":282,"props":719,"children":720},{},[721],{"type":26,"value":722},"Locked (Tells whether the account is locked)",{"type":17,"tag":282,"props":724,"children":725},{},[726],{"type":26,"value":727},"Deleted (Tells whether the account has been archived)",{"type":17,"tag":98,"props":729,"children":731},{"id":730},"caching-requirements",[732],{"type":26,"value":733},"Caching Requirements",{"type":17,"tag":18,"props":735,"children":736},{},[737],{"type":26,"value":738},"Currently, there are no caching requirements as the headless authentication service is stateless and the authentication handler service only makes use of a key value store for session storage.",{"type":17,"tag":98,"props":740,"children":742},{"id":741},"capacity-planning",[743],{"type":26,"value":744},"Capacity Planning",{"type":17,"tag":18,"props":746,"children":747},{},[748],{"type":26,"value":749},"Both services will generate logs, metrics, and traces. However, there isn’t an expectation that the service will generate an abnormal amount of data. We will leverage datadog as our metrics, log, and trace store. The retention policy will be 1 month.",{"type":17,"tag":98,"props":751,"children":753},{"id":752},"performance-requirements",[754],{"type":26,"value":755},"Performance Requirements",{"type":17,"tag":18,"props":757,"children":758},{},[759],{"type":26,"value":760},"Authentication Handler Service & Authentication Service (keratin-authn)",{"type":17,"tag":278,"props":762,"children":763},{},[764,769],{"type":17,"tag":282,"props":765,"children":766},{},[767],{"type":26,"value":768},"Expected throughput: 50K QPS",{"type":17,"tag":282,"props":770,"children":771},{},[772],{"type":26,"value":773},"Expected Latencies: \u003C 9ms",{"type":17,"tag":18,"props":775,"children":776},{},[777],{"type":26,"value":778},"In order to ensure we have the utmost throughput and the minimal service level latencies, we following points must be enforced throughout development.\nA gRPC channel must be reused when making gRPC calls since this allows calls to be multiplexed through an existing HTTP/2 connection. If a new channel is created for each gRPC call then we can have a significant latency overhead since each call will require multiple round trips between the client and the server to create the HTTP/2 connection:",{"type":17,"tag":278,"props":780,"children":781},{},[782,787,792,797,802],{"type":17,"tag":282,"props":783,"children":784},{},[785],{"type":26,"value":786},"Opening a socket",{"type":17,"tag":282,"props":788,"children":789},{},[790],{"type":26,"value":791},"Establishing TCP connection",{"type":17,"tag":282,"props":793,"children":794},{},[795],{"type":26,"value":796},"Negotiating TLS",{"type":17,"tag":282,"props":798,"children":799},{},[800],{"type":26,"value":801},"Starting HTTP/2 Connection",{"type":17,"tag":282,"props":803,"children":804},{},[805],{"type":26,"value":806},"Making The gRPC call.",{"type":17,"tag":18,"props":808,"children":809},{},[810],{"type":26,"value":811},"Channels on the contrary are safe to share and reuse between gRPC calls since gRPC clients are created with channels, are lightweight and don't require much caching. Multiple gRPC clients can be generated from a channel and such channels and clients can be used by multiple threads.",{"type":17,"tag":18,"props":813,"children":814},{},[815],{"type":26,"value":816},"Please reference grpc performance best practices throughout development to optimize performance.",{"type":17,"tag":98,"props":818,"children":820},{"id":819},"security",[821],{"type":26,"value":822},"Security",{"type":17,"tag":18,"props":824,"children":825},{},[826],{"type":26,"value":827},"The authentication scheme makes use of emails which is considered personally identifiable information (PII/PCI). As a result, security is crucial. The proper origin headers must be set which is enforced by the keratin-authn service as well as communication via https. To further enhance security, all API traffic must be encrypted with TLS and SSL internally.",{"type":17,"tag":18,"props":829,"children":830},{},[831],{"type":26,"value":832},"Please reference security best practices throughout development to better secure the backend system.",{"type":17,"tag":18,"props":834,"children":835},{},[836],{"type":26,"value":837},"##Multi Region Story\nAs of yet, there are no regional special requirements for this service.",{"type":17,"tag":98,"props":839,"children":841},{"id":840},"apigrpc-endpoints",[842],{"type":26,"value":843},"API/gRPC Endpoints",{"type":17,"tag":18,"props":845,"children":846},{},[847],{"type":26,"value":848},"Please reference the grpc endpoint documentation throughout development.",{"type":17,"tag":98,"props":850,"children":852},{"id":851},"rollout-plan",[853],{"type":26,"value":854},"Rollout Plan",{"type":17,"tag":152,"props":856,"children":858},{"id":857},"rollout-phases",[859],{"type":26,"value":860},"Rollout Phases",{"type":17,"tag":18,"props":862,"children":863},{},[864],{"type":26,"value":865},"Rollout phases will be determined later.\nA/B Tests\nA/B Tests will be determined later.",{"type":17,"tag":152,"props":867,"children":869},{"id":868},"data-migration",[870],{"type":26,"value":871},"Data Migration",{"type":17,"tag":18,"props":873,"children":874},{},[875],{"type":26,"value":876},"No data migration should occur however in the context of the authentication service, schema migrations should occur.",{"type":17,"tag":98,"props":878,"children":880},{"id":879},"test-plan",[881],{"type":26,"value":882},"Test Plan",{"type":17,"tag":18,"props":884,"children":885},{},[886],{"type":26,"value":887},"Testing is crucial and will be prioritized throughout development. Unit tests will be of high importance. We mandata that each service has at least 85% unit test coverage. As for testing dependencies through integration and load tests, we will perform this in four phases.",{"type":17,"tag":278,"props":889,"children":890},{},[891,896,901,906],{"type":17,"tag":282,"props":892,"children":893},{},[894],{"type":26,"value":895},"Phase 1: mock dependency response & test logic",{"type":17,"tag":282,"props":897,"children":898},{},[899],{"type":26,"value":900},"Phase 2: spin up dependencies in docker containers & perform gCurl against grpc endpoints & ensure expected response is obtained",{"type":17,"tag":282,"props":902,"children":903},{},[904],{"type":26,"value":905},"Phase 3: spin up dependencies in local & sandboxed kubernetes cluster & perform gCurl against grpc endpoints & ensure expected response is obtained.",{"type":17,"tag":282,"props":907,"children":908},{},[909],{"type":26,"value":910},"Phase 4: through use of vegeta load testing tool we will perform load tests against services running in kubernetes sandbox environment",{"type":17,"tag":18,"props":912,"children":913},{},[914],{"type":26,"value":915},"The final stage of testing will apply chaos testing. We will enable certain environment variables which will fail some requests based on some preset probability. With this, we will perform load tests once again and ensure the proper set of metrics are emitted and the service is behaving as expected.",{"type":17,"tag":18,"props":917,"children":918},{},[919,924],{"type":17,"tag":22,"props":920,"children":921},{},[922],{"type":26,"value":923},"NOTE",{"type":26,"value":925},": it is important all these can be performed both locally and within our CI/CD workflow.",{"type":17,"tag":98,"props":927,"children":929},{"id":928},"appendix",[930],{"type":26,"value":931},"Appendix",{"type":17,"tag":18,"props":933,"children":934},{},[935],{"type":26,"value":936},"SSL & TLS Examples",{"type":17,"tag":98,"props":938,"children":940},{"id":939},"review-sign-off",[941],{"type":26,"value":942},"Review Sign-Off",{"type":17,"tag":18,"props":944,"children":945},{},[946],{"type":26,"value":947},"Team Lead/Manager - sign off by Srikar, Yoan Yomba\nSponsor - sign off by Yoan Yomba",{"title":10,"searchDepth":949,"depth":949,"links":950},2,[951,952,953,957,958,959,960,968,969,970,971,972,973,974,975,979,980,981],{"id":100,"depth":949,"text":103},{"id":111,"depth":949,"text":114},{"id":132,"depth":949,"text":135,"children":954},[955],{"id":154,"depth":956,"text":157},3,{"id":165,"depth":949,"text":168},{"id":176,"depth":949,"text":179},{"id":225,"depth":949,"text":228},{"id":251,"depth":949,"text":254,"children":961},[962,963,964,965,966,967],{"id":257,"depth":956,"text":260},{"id":268,"depth":956,"text":271},{"id":366,"depth":956,"text":369},{"id":444,"depth":956,"text":447},{"id":504,"depth":956,"text":507},{"id":623,"depth":956,"text":626},{"id":680,"depth":949,"text":683},{"id":691,"depth":949,"text":694},{"id":730,"depth":949,"text":733},{"id":741,"depth":949,"text":744},{"id":752,"depth":949,"text":755},{"id":819,"depth":949,"text":822},{"id":840,"depth":949,"text":843},{"id":851,"depth":949,"text":854,"children":976},[977,978],{"id":857,"depth":956,"text":860},{"id":868,"depth":956,"text":871},{"id":879,"depth":949,"text":882},{"id":928,"depth":949,"text":931},{"id":939,"depth":949,"text":942},"markdown","content:3.engineering:service-overview.md","content","3.engineering/service-overview.md","md","default",["ShallowRef",989],["ShallowReactive",990],{"/engineering/service-overview":991},[992,998],{"_path":993,"_dir":8,"_draft":9,"_partial":9,"_locale":10,"title":994,"description":995,"_type":982,"_id":996,"_source":984,"_file":997,"_extension":986},"/engineering/helm-chart-definition","headless-authentication-service","Headless Authentication Service Helm chart for Kubernetes","content:3.engineering:helm-chart-definition.md","3.engineering/helm-chart-definition.md",{"_path":999,"_dir":8,"_draft":9,"_partial":9,"_locale":10,"title":1000,"description":10,"_type":982,"_id":1001,"_source":984,"_file":1002,"_extension":986},"/engineering/service","Protocol Documentation","content:3.engineering:service.md","3.engineering/service.md",["ShallowRef",1004],{},{"preference":1006,"value":1006,"unknown":1007,"forced":9},"system",true,[1009,1025,1039],{"title":103,"_path":1010,"children":1011,"icon":1024,"redirect":1014},"/introduction",[1012,1015,1018,1021],{"title":1013,"_path":1014},"Getting Started","/introduction/getting-started",{"title":1016,"_path":1017},"Project Structure","/introduction/project-structure",{"title":1019,"_path":1020},"Writing Pages","/introduction/writing-pages",{"title":1022,"_path":1023},"Configuration","/introduction/configuration","ph:star-duotone",{"title":1026,"_path":1027,"children":1028,"icon":1038},"API","/api",[1029,1032,1035],{"title":1030,"_path":1031},"Components","/api/components",{"title":1033,"_path":1034},"Composables","/api/composables",{"title":1036,"_path":1037},"Layouts","/api/layouts","heroicons-outline:bookmark-alt",{"title":1040,"_path":1041,"children":1042,"icon":1038},"Engineering","/engineering",[1043,1044,1045,1046],{"title":994,"_path":993},{"title":11,"_path":7},{"title":1000,"_path":999},{"title":1047,"_path":1048},"Setup","/engineering/setup",{"heroicons-outline:menu":1050,"fa-brands:twitter":1054,"fa-brands:github":1057,"simple-icons:nuxtdotjs":1060,"ph:star-duotone":1062,"lucide:chevrons-down-up":1065,"heroicons-outline:bookmark-alt":1067,"uil:edit":1069,"heroicons-outline:arrow-sm-right":1071,"heroicons-outline:chevron-right":1073,"heroicons-outline:arrow-sm-left":1075,"heroicons-outline:search":1077},{"left":1051,"top":1051,"width":1052,"height":1052,"rotate":1051,"vFlip":9,"hFlip":9,"body":1053},0,24,"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 12h16M4 18h16\"/>",{"left":1051,"top":1051,"width":1055,"height":1055,"rotate":1051,"vFlip":9,"hFlip":9,"body":1056},512,"\u003Cpath fill=\"currentColor\" d=\"M459.37 151.716c.325 4.548.325 9.097.325 13.645c0 138.72-105.583 298.558-298.558 298.558c-59.452 0-114.68-17.219-161.137-47.106c8.447.974 16.568 1.299 25.34 1.299c49.055 0 94.213-16.568 130.274-44.832c-46.132-.975-84.792-31.188-98.112-72.772c6.498.974 12.995 1.624 19.818 1.624c9.421 0 18.843-1.3 27.614-3.573c-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319c-28.264-18.843-46.781-51.005-46.781-87.391c0-19.492 5.197-37.36 14.294-52.954c51.655 63.675 129.3 105.258 216.365 109.807c-1.624-7.797-2.599-15.918-2.599-24.04c0-57.828 46.782-104.934 104.934-104.934c30.213 0 57.502 12.67 76.67 33.137c23.715-4.548 46.456-13.32 66.599-25.34c-7.798 24.366-24.366 44.833-46.132 57.827c21.117-2.273 41.584-8.122 60.426-16.243c-14.292 20.791-32.161 39.308-52.628 54.253z\"/>",{"left":1051,"top":1051,"width":1058,"height":1055,"rotate":1051,"vFlip":9,"hFlip":9,"body":1059},496,"\u003Cpath fill=\"currentColor\" d=\"M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2c1.6 1.6 3.9 2.3 5.2 1c1.3-1 1-3.3-.7-5.2c-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9c1.6 1 3.6.7 4.3-.7c.7-1.3-.3-2.9-2.3-3.9c-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2c2.3 2.3 5.2 2.6 6.5 1c1.3-1.3.7-4.3-1.3-6.2c-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9c1.6 2.3 4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2c-1.4-2.3-4-3.3-5.6-2z\"/>",{"left":1051,"top":1051,"width":1052,"height":1052,"rotate":1051,"vFlip":9,"hFlip":9,"body":1061},"\u003Cpath fill=\"currentColor\" d=\"M13.464 19.83h8.922c.283 0 .562-.073.807-.21a1.59 1.59 0 0 0 .591-.574a1.53 1.53 0 0 0 .216-.783a1.529 1.529 0 0 0-.217-.782L17.792 7.414a1.59 1.59 0 0 0-.591-.573a1.652 1.652 0 0 0-.807-.21c-.283 0-.562.073-.807.21a1.59 1.59 0 0 0-.59.573L13.463 9.99L10.47 4.953a1.591 1.591 0 0 0-.591-.573a1.653 1.653 0 0 0-.807-.21c-.284 0-.562.073-.807.21a1.591 1.591 0 0 0-.591.573L.216 17.481a1.53 1.53 0 0 0-.217.782c0 .275.074.545.216.783a1.59 1.59 0 0 0 .59.574c.246.137.525.21.808.21h5.6c2.22 0 3.856-.946 4.982-2.79l2.733-4.593l1.464-2.457l4.395 7.382h-5.859Zm-6.341-2.46l-3.908-.002l5.858-9.842l2.923 4.921l-1.957 3.29c-.748 1.196-1.597 1.632-2.916 1.632z\"/>",{"left":1051,"top":1051,"width":1063,"height":1063,"rotate":1051,"vFlip":9,"hFlip":9,"body":1064},256,"\u003Cg fill=\"currentColor\">\u003Cpath d=\"M184.13 147.7a8.08 8.08 0 0 0-2.54 7.89l13.52 58.54a8 8 0 0 1-11.89 8.69l-51.1-31a7.93 7.93 0 0 0-8.24 0l-51.1 31a8 8 0 0 1-11.89-8.69l13.52-58.54a8.08 8.08 0 0 0-2.54-7.89l-45.11-39.35a8 8 0 0 1 4.54-14.07l59.46-5.14a8 8 0 0 0 6.67-4.88l23.23-55.36a8 8 0 0 1 14.68 0l23.23 55.36a8 8 0 0 0 6.67 4.88l59.46 5.14a8 8 0 0 1 4.54 14.07Z\" opacity=\".2\"/>\u003Cpath d=\"M239.2 97.29a16 16 0 0 0-13.81-11L166 81.17l-23.28-55.36a15.95 15.95 0 0 0-29.44 0L90.07 81.17l-59.46 5.15a16 16 0 0 0-9.11 28.06l45.11 39.42l-13.52 58.54a16 16 0 0 0 23.84 17.34l51-31l51.11 31a16 16 0 0 0 23.84-17.34l-13.51-58.6l45.1-39.36a16 16 0 0 0 4.73-17.09Zm-15.22 5l-45.1 39.36a16 16 0 0 0-5.08 15.71L187.35 216l-51.07-31a15.9 15.9 0 0 0-16.54 0l-51 31l13.46-58.6a16 16 0 0 0-5.08-15.71L32 102.35a.37.37 0 0 1 0-.09l59.44-5.14a16 16 0 0 0 13.35-9.75L128 32.08l23.2 55.29a16 16 0 0 0 13.35 9.75l59.45 5.14v.07Z\"/>\u003C/g>",{"left":1051,"top":1051,"width":1052,"height":1052,"rotate":1051,"vFlip":9,"hFlip":9,"body":1066},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m7 20l5-5l5 5M7 4l5 5l5-5\"/>",{"left":1051,"top":1051,"width":1052,"height":1052,"rotate":1051,"vFlip":9,"hFlip":9,"body":1068},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 4v12l-4-2l-4 2V4M6 20h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2Z\"/>",{"left":1051,"top":1051,"width":1052,"height":1052,"rotate":1051,"vFlip":9,"hFlip":9,"body":1070},"\u003Cpath fill=\"currentColor\" d=\"M21 12a1 1 0 0 0-1 1v6a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h6a1 1 0 0 0 0-2H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-6a1 1 0 0 0-1-1Zm-15 .76V17a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .71-.29l6.92-6.93L21.71 8a1 1 0 0 0 0-1.42l-4.24-4.29a1 1 0 0 0-1.42 0l-2.82 2.83l-6.94 6.93a1 1 0 0 0-.29.71Zm10.76-8.35l2.83 2.83l-1.42 1.42l-2.83-2.83ZM8 13.17l5.93-5.93l2.83 2.83L10.83 16H8Z\"/>",{"left":1051,"top":1051,"width":1052,"height":1052,"rotate":1051,"vFlip":9,"hFlip":9,"body":1072},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m13 7l5 5m0 0l-5 5m5-5H6\"/>",{"left":1051,"top":1051,"width":1052,"height":1052,"rotate":1051,"vFlip":9,"hFlip":9,"body":1074},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m9 5l7 7l-7 7\"/>",{"left":1051,"top":1051,"width":1052,"height":1052,"rotate":1051,"vFlip":9,"hFlip":9,"body":1076},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m11 17l-5-5m0 0l5-5m-5 5h12\"/>",{"left":1051,"top":1051,"width":1052,"height":1052,"rotate":1051,"vFlip":9,"hFlip":9,"body":1078},"\u003Cpath fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m21 21l-6-6m2-5a7 7 0 1 1-14 0a7 7 0 0 1 14 0Z\"/>",{"parentPath":1041,"scrollTop":1051},{},{},{},{},["Reactive",1085],{"search-api":1086},null,1701363402295]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{plausible:{hashMode:false,trackLocalhost:false,domain:"",apiHost:"https://plausible.io",autoPageviews:true,autoOutboundTracking:false},studio:{apiURL:"https://api.nuxt.studio"},mdc:{components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{locales:[],defaultLocale:"",integrity:1701363369959,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:["icon","titleTemplate","header","main","aside","footer","layout"]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:{dark:"github-dark",default:"github-light"},preload:["json","js","ts","html","css","vue","diff","shell","markdown","yaml","bash","ini"]},wsUrl:"",documentDriven:{page:true,navigation:true,surround:true,globals:{},layoutFallbacks:["theme"],injectPage:true},host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"/",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body>
</html>